<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ofx:section xmlns:ofx="http://www.openfuxml.org"
			xmlns:text="http://www.openfuxml.org/text"
	id="section.admin.installation.jboss">
	<ofx:title lang="en">JBoss Application Server</ofx:title>
	
	<ofx:paragraph lang="en">
			JBossAS, or simply JBoss, is an application server authored by JBoss, now developed by Red Hat.
			It is written in Java, and implements the Java Platform, Enterprise Edition (Java EE) specification.
			It runs on multiple platforms. The software is free and open-source software, subject to the requirements of the GNU Lesser General Public License (LGPL).
		</ofx:paragraph>
	
	<ofx:section container="true" classifier="as7">
		<ofx:title lang="en">AS7</ofx:title>
		
		<ofx:paragraph lang="de">
			Der Applikationsserver wird im Verzeichnis \texttt{bin} mit dem Befehl \texttt{standalone.sh}
			(oder \texttt{standalone.bat}) gestartet. Der Startprozess sollte fehlerfrei durchlaufen und
			mit folgender Meldung abgeschlossen werden:
		</ofx:paragraph>
		<ofx:paragraph lang="fr">
			Le serveur d'applications est démarré dans le répertoire  \texttt{bin} avec la commande \texttt{standalone.sh}
			(ou \texttt{standalone.bat}). Le processus de démarrage devrait fonctionner sans accroc et se terminer avec
			l'indication suivante:
		</ofx:paragraph>
		
		<ofx:paragraph lang="de">
			Die ZIP-Datei \texttt{lgp-jboss-modules.zip} muss nun im Verzeichnis \texttt{modules} entpackt werden, so dass folgende Struktur entsteht:
		</ofx:paragraph>
		<ofx:paragraph lang="fr">
			Le fichier ZIP \texttt{lgp-jboss-modules.zip} doit être déchargé dans le répertoire \texttt{modules} de telle manière à ce que l'on ait la structure suivante:
		</ofx:paragraph>
	</ofx:section>
	
	<ofx:section container="true" classifier="eap6">
		<ofx:title lang="en">EAP 6.1</ofx:title>
		
		<ofx:paragraph lang="de" version="1">
				Download EAP 6.1.0 GA from www.jboss.org and install to /opt. In /opt the access rights for the directory
				have to adjusted:
				sudo chown dev jboss-eap-6.1/ -R
			</ofx:paragraph>
		
		<ofx:section>
			<ofx:title lang="en">Configuration</ofx:title>
			
			<ofx:paragraph lang="de" version="1">
				Um Ausgaben in einer anderen Sprache als Englisch zu vermeiden,
				sollte die Sprache in der Datei <text:emphasis style="typewriter">/bin/standalone.conf</text:emphasis>
				explizit mit folgender Option gesetzt werden:
			</ofx:paragraph>
			<ofx:paragraph lang="en" version="1">
				To avoid debug outputs in a language different thant english,
				the language should be explicitly be set in the
				file <text:emphasis style="typewriter">/bin/standalone.conf</text:emphasis> with the following option:
			</ofx:paragraph>
			<ofx:listing>
				<ofx:raw>JAVA_OPTS = ... -Duser.language=en</ofx:raw>
			</ofx:listing>
			
			<ofx:paragraph lang="en" version="1">
				The applciations server needs
				 <text:emphasis style="typewriter">jboss-6.1.0-postgis.tgz</text:emphasis> 
				 
				 Unpacking in <text:emphasis style="typewriter">jboss-eap-6.1/modules/system/layers/base</text:emphasis>
			</ofx:paragraph>
			
			<ofx:section>
				<ofx:title lang="en">Data Source</ofx:title>
				
				<ofx:paragraph lang="en" version="1">
					The data source describes the connection to the database and registeres it internally in
					the application server. The password shown is the given listing is an example and should
					be changed for production use.
				</ofx:paragraph>
				<ofx:listing external="listing/admin/installation/jboss/datasource.xml"/>
				
				<ofx:section container="true" classifier="postgis">
					<ofx:title lang="en">PostGIS Database Driver</ofx:title>
					
					<ofx:paragraph lang="en" version="1">
						The database driver for PostgreSQL has to be registered in
						<text:emphasis style="typewriter">/standalone/configuration/standalone.conf</text:emphasis>
						in the section <text:emphasis italic="true">server/profile/subsystem</text:emphasis> of the subsystem
						<text:emphasis italic="true">urn:jboss:domain:datasources:1.1</text:emphasis> as a new driver:
					</ofx:paragraph>
					<ofx:listing external="listing/admin/installation/jboss/ds-driver-postgres.xml"/>
				</ofx:section>
			</ofx:section>
			
			<ofx:section>
				<ofx:title lang="en">Connection</ofx:title>
				
				<ofx:paragraph lang="en" version="1">
					http all
				</ofx:paragraph>
				
			</ofx:section>
			
			<ofx:section>
				<ofx:title lang="en">Modules</ofx:title>
				
				<ofx:paragraph lang="en" version="1">
					All modules can be automatically installed by unpacking the provided archive
					<text:emphasis style="typewriter">jboss-modules-tgz</text:emphasis> in the directory
					<text:emphasis style="typewriter">/opt/jboss-eap-6.1/modules/system/layers/base</text:emphasis>.
					The following subsection describe the differences to the original configuration files.
				</ofx:paragraph>
				
				<ofx:section classifier="postgis">
					<ofx:title lang="en">PostgreSQL Module</ofx:title>
					
					<ofx:paragraph lang="en" version="1">
						Similar to the setup of other JDBC database drivers for JBoss,
						a module <text:emphasis bold="true">org.postgresql</text:emphasis> has to be registered.
						In the directory <text:emphasis style="typewriter">/modules/org/postgresql/main</text:emphasis>
						the new file <text:emphasis style="typewriter">module.xml</text:emphasis> must be created
						with the following content:
					</ofx:paragraph>
					<ofx:listing external="listing/admin/installation/jboss/module-postgres.xml"/>
				</ofx:section>
				
				<ofx:section classifier="mysql">
					<ofx:title lang="en">MySQL Module</ofx:title>
					
					<ofx:paragraph lang="en" version="1">
						TBD
					</ofx:paragraph>
					
				</ofx:section>
				
				<ofx:section>
					<ofx:title lang="en">Hibernate Module</ofx:title>
					
					<ofx:paragraph lang="en" version="1">
						The module <text:emphasis bold="true">hibernate</text:emphasis> already exists in the directory
						<text:emphasis style="typewriter">/modules/hibernate/main</text:emphasis>
						and must be extended:
					</ofx:paragraph>
					<ofx:listing external="listing/admin/installation/jboss/module-hibernate.xml"/>
				</ofx:section>
				
			</ofx:section>
		
		</ofx:section>
		
		
		<ofx:section>
			<ofx:title lang="en">Deployment</ofx:title>
			
			<ofx:paragraph lang="en" version="1">
					The application is deployed using the command line tool
					<text:emphasis style="typewriter">/opt/jboss-eap-6.1/bin/jboss-cli.sh</text:emphasis>
					in the same directoy where the file
					<text:emphasis style="typewriter">meis.ear</text:emphasis>
					is located. Detailed instructions for deployment and undeployment are given in section 
					<text:emphasis italic="true">System Maintenance</text:emphasis>.
			</ofx:paragraph>
			
			<ofx:listing>
				<ofx:raw>You are disconnected at the moment. Type 'connect' to connect to the server or
'help' for the list of supported commands.
[disconnected /] connect
[standalone@localhost:9999 /] deploy meis.ear
[standalone@localhost:9999 /] undeploy meis.ear</ofx:raw>
			</ofx:listing>
			
		</ofx:section>
	</ofx:section>
</ofx:section>