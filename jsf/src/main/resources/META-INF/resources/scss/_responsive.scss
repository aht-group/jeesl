@use 'sass:math';

@import '_fonts';

$enable-pointer-cursor-for-buttons: true;
.jeesl-icon, .pf-action-icon, .jeesl-menu-bar-item, .ui-selectonemenu, .ui-icon { --icon-height-multiplier: 1 }

@import '_reboot';
@import '_responsiveCommon';
@import '_responsiveCharts';

@mixin pseudo-overlay() {
	bottom: 0;
	content: '';
	left: 0;
	position: absolute;
	right: 0;
	top: 0;
}

@mixin background-overlay($background-color) {
	@include pseudo-overlay;
	
	background: $background-color;
	opacity: 0;
	transition: opacity $transition-duration ease-in-out;
}

@mixin triangle($colour: transparent, $width: 0) {
	border-color: $colour;
    border-style: solid;
    border-width: $width;
    content: '';
    position: absolute;
    top: 0;
    margin-top: 0;
    display: block;
}

@mixin jeesl-sb-separator($colour: $bright-colour) {
	border-left: 1px solid $colour;
    content: '';
    display: inline-block;
    height: calc(100% - 14px);
	margin: 7px 0;
	position: initial;
    vertical-align: top;
}

@mixin jeesl-sb-dropdown($foreground, $background, $hover, $separator, $zindex: 1) {
	.jeesl-dropdown-list {
		background: $background;
		list-style: none;
		opacity: 0;
	    overflow: visible;
		padding: 0;
	    position: absolute;
	    right: 0;
	    text-align: right;
	    z-index: $zindex;
	    visibility: hidden;
		
		&:before {
			background: $hover;
		}
		
		&:after {
			background: $background;
		}

		@media (max-width: 768px) {
			height: 0;
		    opacity: 1;
		    overflow: hidden;
			transition: opacity 0s .4s, height .4s ease-in-out, visibility 0s .4s;
		    visibility: visible;
		    width: 100%;
		
			&:before, &:after {
				content: '';
				display: list-item;
				height: 15px;
				width: 100%;
			}
		}
		
		&.jeesl-active {
			height: auto;
			transition: opacity 0s, height .4s ease-in-out, visibility 0s;
			
			.jeesl-dropdown-item {
				opacity: 1;
    			transition: opacity 0s 0s;
			}
		}
		
		&.jeesl-dropdown-sub {
			background: $main-background-gradient;
			min-width: 100%;
			opacity: 0;
			position: absolute;
			top: 100%;
			transition: opacity $transition-duration linear, visibility 0s $transition-duration linear;
			visibility: hidden;
			
			.jeesl-dropdown-item {
				transition: background $transition-duration linear, opacity 0s $transition-duration linear, visibility 0s $transition-duration linear;
				
				&:hover {
					background: $dark-colour;
				}
				
				.jeesl-dropdown-item-label {
					border: none;
					color: white;
					float: none;
					font-size: 1.4rem;
					letter-spacing: -1px;
					text-transform: capitalize;
				}
			}
		}
		
		.jeesl-dropdown-item {
			@include jeesl-submenu(jeesl-submenu, $dark-colour);
			
			background: transparent;
			display: block;
			opacity: 1;
			padding: 0;
		    pointer-events: all;
			position: relative;
		    transition: opacity 0s $transition-duration, background $transition-duration linear;

			-webkit-tap-highlight-color: $bright-colour;
			
			@media (max-width: 768px) {
				display: list-item;
			    opacity: 0;
			    padding: 0 15px;
			    transition: opacity 0s .4s, background $transition-duration linear;
			    width: 100%;
			}
			
			&:hover {
				background: $hover;

				.jeesl-dropdown-sub {
					opacity: 1;
					transition: opacity $transition-duration 1s linear, visibility 0s 1s linear;
					visibility: visible;
				}
			}
				
			&:after {
				border-bottom: 0 solid $separator;
				content: '';
				display: block;
				
				@media (max-width: 768px) {
					border-bottom-width: $separator-thickness-mobile;
				}
			}
			
			.jeesl-dropdown-item-label {
				background: transparent;
				color: $foreground;
    			display: block;
				height: 30px;
				line-height: 14px;
				margin: 0;
				padding: 8px 15px;
			    position: relative;
			    white-space: nowrap;

				@media (max-width: 768px) {
					display: flex;
					height: 50px;
					line-height: 50px;
					margin: 0;
					padding: 0 10px;
					text-align: left;
					width: 100%;
				}
				
				.jeesl-dropdown-item-label-text {
					flex: 1;
				    min-width: 0;
				    overflow: hidden;
					text-overflow: ellipsis;
				}
				
				.jeesl-dropdown-item-label-icon {
					height: 100%;
					margin-left: 5px;

					@media (max-width: 768px) {
						margin: 0;
						padding: 9px;
					}
				}
			}
		}
	}
}

@mixin jeesl-burger-icon($colour) {
	.jeesl-burger-menu-icon {
		background: $colour;
		background-clip: content-box;
		cursor: pointer;
		display: none;
		transition: .4s linear background;
		vertical-align: top;
		
		-webkit-tap-highlight-color: $bright-colour;

		@media (max-width: 768px) {
			display: inline-block;
		}
		
		&:before, &:after {
			background: $colour;
		    content: '';
			display: block;
			position: absolute;
		    transition: 0.4s;
		    width: calc(100% - 2 * #{$wide-spacing});
		}
		
		&.jeesl-active {
			background-color: transparent;
		}
	}
}

@mixin jeesl-submenu($class, $hover) {
	.#{$class} {
		@media (max-width: 768px) {
			height: $ls-element-height-mobile;
			margin-top: -$ls-element-height-mobile;
			overflow: hidden;
			pointer-events: none;
			position: relative;
		}
		
		&.jeesl-open {
			.#{$class}-icon {
				transform: rotate(180deg);
			}
		}
		
		.#{$class}-icon {
			display: none;
			
			@media (max-width: 768px) {
				cursor: pointer;
				display: inline-block;
				font-size: 35px;
				height: $ls-element-height-mobile;
				line-height: $ls-element-height-mobile;
				pointer-events: all;
				text-align: center;
				transition: transform $transition-duration ease-in-out;
				width: $ls-element-height-mobile;
			}
			
			&:hover {
				color: $hover;
			}
		}
		
		.jeesl-dropdown-sub {
			@media (max-width: 768px) {
				height: auto;
				opacity: 1;
				position: relative;
				top: 0;
				visibility: visible;
			}
			
			&:before, &:after {
				display: none;
			}
			
			.jeesl-dropdown-item:last-child:after {
				display: none;
			}
		}
	}
}

@mixin jeesl-menu-bar {
    color: $white-100;
    padding: 0;

	@media (max-width: 768px) {
		height: 42px;
	}
	
	a:hover {
		color: $white-100;
		text-decoration: none;
	}
	
	.jeesl-menu-bar-list {
	    list-style: none;
	    padding: 0;
		pointer-events: none;
	    position: relative;

		> * {
			pointer-events: all;
		}

		.jeesl-menu-bar-item {
			background: transparent;
			font-size: 0;
			height: 100%;
		    margin: 0;
		    padding: 0;
			pointer-events: none;
		    position: relative;
		    top: 0;

			@media (max-width: 768px) {
				position: initial;
			}
			
			&:hover {
				.jeesl-dropdown-list {
					transition: opacity .2s, visibility 0s;
					
					@media (max-width: 768px) {
						transition: opacity 0s .4s, height .4s ease-in-out, visibility 0s .4s;
					}
				}
			}

			&.jeesl-active.ui-commandlink {
				text-decoration: none;
			}
			
			> * {
				font-size: 1rem;
			}

			.jeesl-menu-bar-button {
				@include vertical-center(after);
				
				align-items: stretch;
				cursor: pointer;
				display: flex;
				height: 100%;
				transition: background .2s linear;
				pointer-events: all;
			    position: relative;
			    white-space: nowrap;

				-webkit-tap-highlight-color: $bright-colour;

				@media (max-width: 768px) {
			    	height: $bc-element-height-mobile;
					transition-duration: .4s;
				}
				
				.jeesl-menu-bar-button-icon, .jeesl-menu-bar-button-label, .jeesl-menu-bar-button-info, .jeesl-menu-bar-button-summary {
					align-items: center;
					display: flex;
				}

				.jeesl-menu-bar-button-icon, .ui-commandlink {
					height: 100%;
					position: relative;
				    vertical-align: top;
					
					&.jeesl-greyscale {
						cursor: default;
					}
				}
				
				.jeesl-menu-bar-button-label {
			    	color: $white-100;
				}
				
				.jeesl-menu-bar-button-info {
					font-style: italic;
					opacity: .5;
					z-index: 2;
					
					&:last-child {
						padding-right: 6px;
					}
					
					@media (max-width: 768px) {
						padding: 0 6px;
					}
				}
				
				.jeesl-menu-bar-button-summary {
					height: 100%;
					
					.jeesl-menu-bar-button-info {
						display: none;
						
						@media (max-width: 768px) {
							display: inline-block;
						}
					}
					
					.jeesl-menu-bar-button-selected-items {
						padding: 0 5px;
						position: relative;
						
						@media (max-width: 768px) {
							display: none;
						}
						
						img {
							height: 100%;
							padding: 0 1px;
						}
					}
				}
			}
			
			.jeesl-dropdown-list {
				pointer-events: all;
	    		transition: opacity .2s 0s, visibility 0s .2s;
			}

			.ui-inputgroup {
				pointer-events: all;
			}
					
			.jeesl-overlay-container {
				visibility: hidden;
				pointer-events: all;
				transition: none;
				z-index: 1000;
				
				@media (max-width: 768px) {
					left: 0;
					right: 0;
				}
				
				&.jeesl-visible {
					visibility: visible;
					
					.jeesl-overlay-wrapper .ui-selectonemenu-list {
						&:before, &:after {
						    display: list-item;
						}
					}
				}
				
				.jeesl-overlay-wrapper .ui-selectonemenu-list {
					overflow: hidden;
					
					@media (max-width: 768px) {
						&:before, &:after {
							content: '';
							display: list-item;
						    height: 15px;
						    width: 100%;
						}
					}
					
					&:before {
						background: $dark-colour;
					}
				
					.ui-selectonemenu-item {
						height: auto;
						
						&:hover {
							background: $dark-colour;
						}
						
						&:after {
							margin: 0;
						}
						
						.ui-selectonemenu-item-text {
							font-weight: $font-weight-bold;
							height: $element-height;
							line-height: $element-height;
						}
					
						.jeesl-field-tip {
							font-size: $font-size;
							height: 0;
							margin-top: 0;
							position: relative;
							transition: height .2s linear;
							
							.jeesl-field-tip-content {
								@include pseudo-overlay;
								
								bottom: auto;
								box-shadow: none;
								padding: 0;
								position: relative;
								opacity: 1;
								top: 0;
								width: $field-tip-width;
								
								.jeesl-grid {
									margin: 0;
									padding-bottom: 5px;
								}
							}
						}
					}
				}
			}
		}
	}
}

@mixin jeesl-titlebar {
	align-items: center;
	background: $soft-grey linear-gradient(to bottom, $white-80, $white-0);
	border-radius: $border-radius-top;
	border: none;
	border-bottom: $header-underline;
	box-shadow: $header-shadow;
	box-sizing: content-box;
	color: $foreground;
	display: flex;
	flex-wrap: wrap;
	font-weight: 700;
	height: auto;
	margin: 0;
	min-height: $element-height;
	padding: 0;
	position: relative;
	text-shadow: $text-shadow;
	
	@media (max-width: 768px) {
		border-bottom-width: $header-element-underline-mobile;
		min-height: $element-height-mobile;
	}
}

@mixin jeesl-titlebar-title {
	@include font-header;
	
	align-items: center;
	display: flex;
	flex-grow: 1;
	line-height: 1em;
	padding: $slim-spacing $regular-spacing;

	@media (max-width: 768px) {
		padding: $half-spacing $regular-spacing;
	}
}

@mixin jeesl-titlebar-actions {
	display: flex;
	flex-direction: row-reverse;
	float: none;
	height: auto;
	
	img {
		padding: 0 $header-icon-padding-horizontal;
			
		@media (max-width: 768px) {
			padding: 0 $ls-element-padding-vertical;
		}
	}
	
	> img {
		margin: $half-spacing 0;
		
		@media (max-width: 768px) {
			border-left: $border;
			margin: $ls-element-padding-vertical 0;
		}
	}
		
	.pf-action-icon, .jeesl-icon, .jeesl-icon-select .ui-selectonemenu-label {
		@include vertical-center(before);
		
		align-items: center;
		border-radius: 0;
		display: flex;
		margin: 0;
		padding: $half-spacing 0;
		transition: background .2s linear;
		width: auto;

		@media (max-width: 768px) {
			align-items: stretch;
			padding: $header-icon-padding-vertical;
			
			&:before {
			    border-left: $border;
			    height: auto;
			}
		}
		
		&:hover {
			background: $header-background-colour;
		}
		
		img {
			vertical-align: middle;
		}
	}
	
	.jeesl-icon-select {
		align-items: center;
		box-shadow: inherit;
		z-index: 1;
		
		@media (max-width: 768px) {
			min-height: $header-icon-height-mobile;
			position: unset;
		}
		
		.ui-selectonemenu-label {
			background: transparent;
			min-height: $header-icon-height;
			padding: $half-spacing 0 !important;
			
			@media (max-width: 768px) {
				padding: $header-icon-padding-vertical !important;
			}
		}
		
		.ui-selectonemenu-trigger {
			display: none;
		}
		
		.ui-selectonemenu-panel {
			left: auto !important;
			right: 0;
			text-align: center;
			
			@media (max-width: 768px) {
				border-radius: 0;
			}
			
			table.ui-selectonemenu-items {
				width: 100%;
				
				@media (max-width: 768px) {
					.ui-selectonemenu-item.ui-selectonemenu-row {
						&.ui-state-highlight > td:after {
							border-color: $dark-colour;
						}
						
						&.ui-state-hover {
							background: $white-100;
						}
						
						> td {
							height: $ls-element-height-mobile;
							padding: $regular-spacing $wide-spacing;
							position: relative;
							text-align: left;
							
							&:after {
								border-bottom: $separator-thickness-mobile solid $bright-grey;
								bottom: 0;
								content: '';
								display: block;
								position: absolute;
								transition: border-color $transition-duration linear;
								width: calc(100% - 2 * #{$wide-spacing});
							}
							
							&:hover:after {
								border-color: $dark-colour;
							}
						}
					}
				}
			}
		}
	}
}

@mixin jeesl-panel-titlebar {
	.ui-panel-titlebar {
		@include jeesl-titlebar;
		
		.ui-panel-title {
			@include jeesl-titlebar-title;
		}
		
		.ui-panel-actions {
			.ui-outputpanel {
				display: flex;
				flex-direction: row-reverse;
				height: 100%;
			}
			
			.jeesl-icon-select {
				min-width: auto !important;
			}
			
			@include jeesl-titlebar-actions;
		}
	}
}

@mixin jeesl-table-titlebar {
	.ui-datatable-header {
		@include jeesl-titlebar;
		
		.pf-datatable-header-title {
			@include jeesl-titlebar-title;
		}
		
		.pf-datatable-header-actions {
			@include jeesl-titlebar-actions;
		}
	}
}

@mixin jeesl-fileupload-titlebar {
	.ui-fileupload-buttonbar {
		@include jeesl-titlebar;
		
		.ui-button {
			align-items: stretch;
			background: none;
			border: none;
			border-radius: 0;
			box-shadow: none;
			display: flex;
			height: auto;
			margin-right: 0;
			padding: $half-spacing 0;
			
			&:before {
				border-radius: 0;
			}
			
			@media (max-width: 768px) {
				padding: $header-icon-padding-vertical;
			
				&.ui-button-text-icon-left .ui-button-text {
					border-right: $border;
				}
			}
			
			.ui-icon {
				height: calc($icon-height * var(--icon-height-multiplier));
				left: 0;
				margin: 0;
				padding: 0 $header-icon-padding-horizontal;
				position: relative;
				top: 0;
				
				@media (max-width: 768px) {
					height: calc($element-height-mobile * var(--icon-height-multiplier));
					padding: 0 $header-icon-padding-horizontal-mobile;
				}
				
				&.ui-icon-plusthick, &.ui-icon-cancel, &.ui-icon-arrowreturnthick-1-n {
					width: calc($icon-height * var(--icon-height-multiplier) + (2 * #{$header-icon-padding-horizontal}));
					
					@media (max-width: 768px) {
						width: calc($element-height-mobile * var(--icon-height-multiplier)  + (2 * #{$header-icon-padding-horizontal-mobile}));
					}
					
					&:before {
						background-repeat: no-repeat;
						background-size: 100%;
						content: '';
						display: block;
						height: 100%;
					}
				}
				
				&.ui-icon-plusthick {
					&:before {
						background-image: url(/jeesl/javax.faces.resource/ui/control/crud/add.svg.xhtml?ln=jeeslGfx&buildVersion=1714132495);
					}
				}
				
				&.ui-icon-cancel {
					&:before {
						background-image: url(/jeesl/javax.faces.resource/ui/control/crud/cancel.svg.xhtml?ln=jeeslGfx&buildVersion=1714471959);
					}
				}
				
				&.ui-icon-arrowreturnthick-1-n {
					&:before {
						background-image: url(/erp/javax.faces.resource/ui/control/browser/upload.svg.xhtml?ln=jeeslGfx&buildVersion=1714471959);
					}
				}
				
				+ .ui-button-text {
					padding-left: 0;
				}
			}
			
			.ui-button-text {
				align-items: center;
				color: $dark-colour;
				display: flex;
				padding: 0 $half-spacing;
			
				@media (max-width: 768px) {
					font-size: 1.4em;
					letter-spacing: -.5px;
				}
			}
		}
	}
}

@mixin jeesl-tabs-titlebar {
	.ui-tabs-nav {
		@include jeesl-titlebar;
		
		height: auto;
			padding: 3px $regular-spacing 0 !important; // Overwrite primefaces style.
			
		@media (max-width: 768px) {
			
			&:after {
				margin-left: -3px;
				width: 100%;
			}
		}
		
		.ui-tabs-header {
			align-items: center;
			background: linear-gradient(to bottom, $light-grey 87%, $soft-grey 100%);
			border-width: $border-width;
			box-shadow: inset 0 1px 0 $white-100;
			display: flex;
				margin: 0 3px 0 0;
			min-height: $element-height;
			padding: 0;
				top: 0 !important;
			
			@media (max-width: 768px) {
				min-height: $element-height-mobile;
			}
			
			&.ui-tabs-selected {
				background: linear-gradient(to bottom, $white-100, $panel-background);
				    border: 0;
					padding: 1px;
				
				&:before {
					background: linear-gradient(to bottom, $medium-colour, $dark-colour);
				    border-radius: inherit;
				    box-shadow: inset 0 1px 0 $bright-colour;
					opacity: 1;
					display: block;
				}
				
				> * {
					position: relative;
						color: $white-100;
						text-shadow: none;
					
					> a {
						color: inherit;
						text-shadow: inherit;
					}
				}
			}
	
			&:hover:before {
				opacity: 1;
			}
								
			&:before {
				@include background-overlay(linear-gradient(to bottom, $bright-grey 87%, $soft-grey 100%));
			}
			
			> a {
				@include jeesl-titlebar-title;
				
				color: $anthracite;
				padding: 0 $regular-spacing;
				position: relative;
			}
		}
	}
}

@mixin jeesl-dialog-titlebar {
	.ui-dialog-titlebar {
		@include jeesl-titlebar;
		
		@media (max-width: 768px) {
			pointer-events: none;
		}
		
		> .ui-dialog-title {
			align-items: center;
			display: flex;
			flex-grow: 1;
			
			.ui-dialog-title {
				@include jeesl-titlebar-title;
			}
			
			.ui-dialog-titlebar-actions {
				@include jeesl-titlebar-actions;
				
			    bottom: 0;
				cursor: default;
			    position: initial;
			    right: 0;

				@media (max-width: 768px) {
					pointer-events: all;
				}

				.ui-outputpanel {
					.pf-action-icon {
						float: none;
						
						img {
							vertical-align: initial;
						}
					}
				}
			}
		}
		
		.ui-dialog-title {
			float: none;
			margin: 0;
		}
	}
}

@mixin jeesl-footer {
	border: none;
	border-radius: $border-radius-bottom;
	border-top: $header-element-underline solid $dark-colour;
	color: $dark-colour;
	font-weight: 700;
	padding: $half-spacing $regular-spacing;
			
	@media (max-width: 768px) {
		border-top-width: $header-element-underline-mobile;
		margin: $half-spacing 0 0;
	}
}

@mixin input-grid {
	.ui-fluid {
		display: flex;
		flex-direction: column;
		
		.p-grid {
			position: relative;
			
			@media (max-width: 768px) {
				display: block;
				padding: 0;
			}
			
			.p-col {
				&.ui-outputlabel {
					flex-grow: 0;
					word-break: break-all;
					
					@media (max-width: 768px) {
						left: 50%;
						line-height: normal;
						padding: 0;
						position: absolute;
						top: 0;
	    				transform: translate(-50%, 0);
						width: auto;
						word-break: break-word;
						z-index: 1;
						
						&:first-child {
							left: 15px;
							transform: none;
						}
						
						&:last-child {
							left: auto;
							right: 15px;
							transform: none;
						}
					}
					
					&.p-md-0 {
						padding-right: 0;
						
						+ .p-col {
							padding-left: 0;
						}
					}
					
					.jeesl-icon {
						order: -1;
						
						@media (max-width: 768px) {
							height: $grid-label-icon-height-mobile;
						}
					}
				}
				
				&:not(.ui-outputlabel) {
					overflow-wrap: anywhere;
					
					flex-grow: 1;
					
					@media (max-width: 768px) {
						line-height: normal;
					    padding: .6em 0 $slim-spacing 0;

						// Overriding inline css
						width: 100% !important;
					}
					
					> .ui-inputfield, .ui-selectonemenu, .ui-spinner, .ui-selectcheckboxmenu, .ui-selectmanybutton, .ui-chips {
						border-radius: $border-radius;
						
						@media (max-width: 768px) {
							margin: 0;
							padding: $half-spacing $regular-spacing;
							width: 100%;
						}
					}
					
					> span:not(.jeesl-input-container, .jeesl-datepicker, .ui-autocomplete) {
						border-radius: $border-radius;
						padding: 0;
						
						&:not(.jeesl-block) {
							display: inline-block;
						
							@media (max-width: 768px) {
								display: flex;
							}
						}
						
						@media (max-width: 768px) {
							align-items: center;
							background: $light-grey;
							padding: $regular-spacing;
							
							&.jeesl-center {
								justify-content: center;
							}
							
							&.jeesl-right {
								justify-content: end;
							}
						}
					}
					
					> .ui-button {
						width: auto;
					}
					
					> .ui-selectonemenu, > .ui-selectcheckboxmenu, > .ui-selectmanybutton, > .ui-chips {
						padding: 0;
					}
					
					> .jeesl-datepicker {
						display: flex;
						
						.ui-inputfield {
							width: 85%;
						}
						
						.ui-datepicker-trigger {
							position: relative;
							right: 0;
						}
					}
					
					> .jeesl-ck-editor .cke_button {
						border-width: $border-width 0;
						
						&:last-child {
							border-right: $border;
							border-top-right-radius: $border-radius;
						}
					}
					
					> .jeesl-tabs {
						margin: 0;
						padding: 0;
						
						.ui-tabs-nav {
							border-radius: $border-radius-top;
							margin: 0;
							
							@media (max-width: 768px) {
								border-width: $border-width $border-width 0;
								padding: #{$regular-spacing - $border-width} $regular-spacing 0 !important;
								
								&:after {
									margin-left: -#{$regular-spacing + $border-width};
									width: calc(100% + #{2 * $border-width});
								}
							}
							
							.ui-tabs-header {
								cursor: pointer;
								min-height: #{$element-height - 2 * $border-width - $slim-spacing};
								top: $border-width;
								
								@media (max-width: 768px) {
									justify-content: center;
									min-height: #{$element-height-mobile - $regular-spacing};
									min-width: $element-height-mobile;
								}
								
								&.ui-state-active {
									background: linear-gradient(to bottom, $panel-background, $white-100);
									cursor: default;
									min-height: #{$element-height - $border-width - $slim-spacing};
									
									@media (max-width: 768px) {
										min-height: #{$element-height-mobile - $regular-spacing};
									}
									
									a {
										cursor: default;
									}
								}
							}
						}
							
						.ui-tabs-panels {
							padding: 0;
							
							.ui-tabs-panel {
								margin-top: $header-element-underline;
								
								@media (max-width: 768px) {
									padding: 0;
									margin-top: $header-element-underline-mobile;
								}
								
								.ui-inputtextarea {
									border-radius: $border-radius-bottom;
									margin: 0;
								}
							}
						}
					}
				}
			}
		}
		
		.ui-button {
			width: auto;
		}
	}
}

@mixin image-gallery {
	.ui-galleria {
		width: 100% !important;
		
		.ui-galleria-panel-wrapper {
			margin: 0 auto;
		}
		
		.ui-galleria-filmstrip-wrapper {
			height: 50px !important;
			margin: 0;
			width: 100% !important;
		}
		
		.ui-icon {
			background-image: none;
			bottom: 0 !important;
			height: 50px;
			width: 42px;
			text-align: center;
			text-indent: initial;
			transition: background .2s linear;
			
			&:hover {
				background: $soft-grey;
			}
			
			&.ui-icon-circle-triangle-w {
				left: 0;
				
				&:before {
					@include triangle(transparent $dark-grey transparent transparent, 8px 8px 8px 0);
					
					display: inline-block;
					position: relative;
					vertical-align: middle;
				}
			}
			
			&.ui-icon-circle-triangle-e {
				right: 0;
				
				&:before {
					@include triangle(transparent transparent transparent $dark-grey, 8px 0 8px 8px);
					
					display: inline-block;
					position: relative;
					vertical-align: middle;
				}
			}
			
			&:after {
				content: '';
				display: inline-block;
			    height: 100%;
				position: relative;
				vertical-align: middle;
			}
		}
		
		.ui-galleria-caption {
			width: 100% !important;
		}
	}
}

/******************
 * TREE ANIMATION *
 ******************/
//.ui-tree {
//	.ui-treenode {
//		&:not(.jeesl-active) {
//			.ui-treenode-content {
//				&.ui-droppable-active {
//					+ .ui-treenode-children {
//						display: none !important;
//					}
//				}
//			}
//		}
//		
//		.ui-treenode-children {
//			display: list-item !important;
//			height: 0;
//			overflow: hidden;
//			transition: height .4s ease-in-out;
//		}
//	}
//}
/******************/

@mixin justified-panel-content {
	margin-left: -$regular-spacing;
	margin-right: -$regular-spacing;
		
	@media (max-width: 768px) {
		margin-left: -$regular-spacing;
		margin-right: -$regular-spacing;
	}
	
	&:first-child {
		margin-top: -$half-spacing;
	}
	
	&:last-child {
		margin-bottom: -$half-spacing;
	}
}

@mixin justified-panel-border {
	border: $border;
	border-width: $border-width 0;
	
	&:first-child {
		border-top-width: 0;
	}
	
	&:last-child {
		border-bottom-width: 0;
	}
	
	.cke {
		border: none;
	}
}

@mixin jeesl-editor-layout {
	.ui-texteditor, .jeesl-timeline, .jeesl-ck-editor {
		@include justified-panel-content;
		@include justified-panel-border;
		
		&:last-child .ql-container {
			border-radius: $border-radius-bottom;
		}
	}
}

@mixin jeesl-ck-editor {
	.jeesl-ck-editor {
		@media (max-width: 768px) {
			padding: 0;
		}
		
		.cke {
			border: none;
			border-radius: inherit;
			box-sizing: border-box;
			width: 100%;
			
			.cke_inner {
				border-radius: inherit;
			
				.cke_top {
					background: transparent;
					border: none;
					border-radius: 0 inherit 0 0;
					padding: 0;
					
					.cke_toolbar {
						display: flex;
						float: none;
							justify-content: right;
							
						.cke_toolgroup {
							align-items: center;
							display: flex;
							padding: 0;
							margin: 0;
								
							.cke_button {
								@include button(cke_button_on);
								
								border: $border;
								border-radius: 0;
								border-width: 0 0 $border-width;
								box-sizing: border-box;
								cursor: pointer;
								min-width: $element-height;
								
								@media (max-width: 768px) {
									min-width: $element-height-mobile;
								}
								
								&:first-child {
									border-left: $border;
								}
								
								&:after {
									position: relative;
									margin: 0;
								}
								
								.cke_button_label {
									display: none;
								}
								
								.cke_button_icon {
									@include icon;
									
									background: none !important;
									float: none;
									font-size: 0;
									font-weight: bold;
									text-align: center;
									
									&:before {
										font-size: 1rem;
										
										@media (max-width: 768px) {
											font-size: 1.5rem;
										}
									}
									
									&.cke_button__bold_icon:before {
										content: '\f032';
									}
									
									&.cke_button__italic_icon:before {
										content: '\f033';
									}
									
									&.cke_button__bulletedlist_icon:before {
										content: '\f0ca';
									}
									
									&.cke_button__numberedlist_icon:before {
										content: '\f0cb';
									}
									
									&.cke_button__subscript_icon:before {
										content: '\f12c';
									}
									
									&.cke_button__superscript_icon:before {
										content: '\f12b';
									}
								}
							}
							
							.cke_toolbar_separator {
								background: none;
								border-left: $border;
								height: 100%;
								margin: 0;
								width: 0;
							}
						}
					}
				}
				
				.cke_contents {
					padding: $half-spacing $regular-spacing;
					
					@media (max-width: 768px) {
						padding: $regular-spacing;
					}
				}
			}
		}
	}
}

@mixin jeesl-panel {
	@include jeesl-editor-layout;
	@include jeesl-panel-titlebar;
	
	background: $panel-background;
	display: flex;
	flex-direction: column;
	padding: 0;
	
	&:not(.html-container-panel) .ui-panel-content {
		background: transparent;
		border: 0;
		flex: 1;
		padding: $regular-spacing $regular-spacing $half-spacing;
		
		.jeesl-construction-icon {
			width: 100%;
		}
	}
	
	&.jeesl-editor {
		.ui-panel-content {
			overflow: visible;

			@include jeesl-ck-editor;
			
			>.jeesl-ck-editor:last-child {
				border-radius: $border-radius-bottom;
			}
			
			.jeesl-input-grid .jeesl-ck-editor .cke .cke_inner .cke_top .cke_toolbar .cke_toolgroup .cke_button {
				border-top-width: $border-width;
				
				&:last-child {
					border-right-width: $border-width;
					border-top-right-radius: $border-radius;
				}
			}
		}
		
		.jeesl-editor-list {
			display: flex;
			margin: -#{$regular-spacing} -#{$regular-spacing} -#{$half-spacing};
			
			@media(max-width: 768px) {
				flex-direction: column;
			}
			
			>.jeesl-ck-editor {
				border: $border;
				border-width: 0 $border-width 0 0;
				flex-grow: 1;
				margin: 0;
					
				@media(max-width: 768px) {
					border-width: 0 0 $border-width;
				}
				
				&:first-child {
					border-bottom-left-radius: $border-radius;
				}
				
				&:last-child {
					border-bottom-right-radius: $border-radius;
					border-width: 0;
				}
			}
		}
	}
	
	&.jeesl-panel-deepl {
		.ui-panel-content {
			padding: 0;
			
			.ui-inputtextarea {
				padding: $wide-spacing !important;
			}
		}
	}
	
	&.jeesl-galleria {
		padding: 0;
		
		&.jeesl-carousel .ui-panel-content {
			&:before, &:after {
				content: '';
			    height: 100%;
				pointer-events: none;
			    position: absolute;
				top: 0;
			    width: 55px;
			    z-index: 1000;
			}
			
			&:before {
			    background: linear-gradient(to right, $panel-background 10px, transparentize($panel-background, .4) 45px, transparent);
				left: 0;
			}
			
			&:after {
			    background: linear-gradient(to left, $panel-background 10px, transparentize($panel-background, .4) 45px, transparent);
				right: 0;
			}
			
			.slick-slide {
				margin: 0 $half-spacing;
			}
			
			.ui-button {
				width: auto;
				z-index: 1001;
					
				&.slick-prev {
					left: 10px;
				}
				
				&.slick-next {
					right: 10px;
				}
				
				.ui-icon {
					align-items: center;
					background: none;
					display: flex;
					height: 100%;
				}
			}
		}
		
		.ui-panel-content {
			padding: 0;
			position: relative;
			width: 100%;
			
			.jeesl-galleria-image-wrapper img, > img {
				width: 100%;
			}
			
			.jeesl-galleria-filmstrip-wrapper {
				align-items: stretch;
				background: $panel-header-gradient;
				border-top: $border;
				display: flex;
				
				.slick-list {
					margin: $half-spacing;
					
					.slick-track {
						display: flex;
						
						.slick-slide {
							cursor: pointer;
							height: auto;
							margin: 0 math.div($half-spacing, 2);
						}
					}
				}
				
				.slick-prev, .slick-next {
					align-items: center;
					border-width: 0;
					box-shadow: none;
					display: flex;
					flex-shrink: 0;
					font-size: 1em;
					height: auto;
					left: auto;
					overflow: hidden;
					padding: 0;
					position: relative;
					right: auto;
					text-indent: 100%;
					top: 0;
					transform: none;
					width: $element-height;
	
					@media (max-width: 768px) {
						font-size: 2.5em;
						width: $element-height-mobile;
					}
					
					&:hover:after {
						opacity: 1;
					}
					
					&:before {
						color: $body-foreground;
						flex-shrink: 0;
						font-family: 'Font Awesome 5 Free';
						font-size: inherit;
						font-weight: 700;
						opacity: 1;
						text-indent: 0;
						text-shadow: $text-shadow;
						width: 100%;
						z-index: 1;
					}
					
					&:after {
						content: '';
					    position: absolute;
					    top: 0;
					    left: 0;
					    width: 100%;
					    height: 100%;
					    background: $soft-grey;
					    opacity: 0;
					    transition: opacity $transition-duration ease-in-out;
					    z-index: 0;
					}
				}
				
				.slick-prev {
					border-right-width: $border-width;
					
					&:before {
						content: $icon-previous;
					}
				}
				
				.slick-next {
					border-left-width: $border-width;
					
					&:before {
						content: $icon-next;
					}
				}
			}
		}
	}
	
	&.jeesl-image-wall {
		.ui-panel-content {
			padding: $half-spacing;
		}
	}
	
	&.jeesl-map {
		.ui-panel-titlebar {
			+ .ui-panel-content {
				border-radius: 0 0 $border-radius $border-radius;
			}
		}
		
		.ui-panel-content {
			border-radius: $border-radius;
			overflow: hidden;
			padding: 0 !important;
		}
		
		.e-chart {
			height: calc(100vh - 180px);
		}
	}
	
	.ui-widget-content:not(.ui-dialog, .ui-selectonemenu-item, .ui-datatable-data) {
		background: transparent;
	}
	
	.jeesl-tabs.jeesl-editor {
		.ui-tabs-panel {
			.ui-texteditor {
				@include justified-panel-content;
			}
		}
	}
	
	.ui-panelgrid {
		.ui-panelgrid-cell {
			height: $element-height;
			
			@media (max-width: 768px) {
				height: $element-height-mobile;
			}
		
			@for $i from 1 to 10 {
				&.jeesl-grid-#{$i}0 {
					width: 0%;
				}
			}
			
			.jeesl-icon {
				height: $table-icon-height;
				
				@media (max-width: 768px) {
					height: $table-icon-height-mobile;
				}
				
				img {
					height: '100%';
				}
			}
		}
		
		@media (max-width: 768px) {
			.ui-panelgrid-cell {
				.jeesl-datatable {
					margin: 0 -#{$regular-spacing};
					width: calc(100% + (2 * #{$regular-spacing}));
				}
			}
			

			&:last-child {
				.ui-panelgrid-cell {
					.jeesl-datatable {
						margin-bottom: -$half-spacing;
					}
				}
			}
		}
		
		.jeesl-datatable {
			@include jeesl-table-titlebar;
			
			margin: 0;
			
			.ui-datatable-header .pf-datatable-header-title {
				font-size: 1.2em;
			}
			
			@media (max-width: 768px) {
				table {
					tr {
						&:last-child {
							td {
								border-bottom: 0;
							}
						}
						
						th, td {
							&:first-child {
								border-left: 0;
							}
							
							&:last-child {
								border-right: 0;
							}
						}
					}
				}
			}
		}
	}
	
	.ui-outputlabel {
		align-items: center;
		display: flex;
		font-weight: bold;
	}
	
	.ui-tree {
		.ui-tree-droppoint {
			&.ui-droppable-active {
				&.ui-state-hover {
					background: $medium-colour;
					box-shadow: none;
					color: $white-100;
				}
			}
		}
		
		.ui-treenode {
			padding: 0;
			
			.ui-treenode-content {
				@include font-interactable;
				
				align-items: center;
				display: flex;
				width: 100%;
				
				@media (max-width: 768px) {
					border-bottom: 2px solid $soft-grey;
					min-height: $ls-element-height-mobile;
				}
				
				&.ui-droppable {
					@media (max-width: 768px) {
						min-height: $ls-element-height-mobile;
						line-height: $ls-element-height-mobile;
					}
				}
				
				&.ui-droppable-active {
					.ui-treenode-label {
						&.ui-state-hover {
							background: $medium-colour;
							color: $white-100;
						}
					}
				}
				
				.ui-treenode-leaf-icon {
					@media (max-width: 768px) {
						display: none;
						
						~ .ui-treenode-label {
							padding-left: 43px;
						}
					}
				}
				
				.ui-tree-toggler {
					align-self: stretch;
					background: none;
					height: auto;
					min-width: calc(#{$element-height - $element-droppable-underline});
					text-align: center;
					text-indent: 0;
					
					@media (max-width:768px) {
						width: 40px;
					}
					
					&:hover {
						background: $soft-grey;
					}
					
					&:before {
						content: '';
					    display: inline-block;
					    height: 100%;
					    vertical-align: middle;
					}
	
					&:after {
						@include triangle(transparent transparent transparent $dark-grey, 4px 0 4px 4px);
						
						display: inline-block;
						position: relative;
						vertical-align: middle;
						
						@media (max-width: 768px) {
							border-width: 8px 0 8px 8px;
						}
					}
					
					&.ui-icon-triangle-1-s:after {
						transform: rotate(90deg);
					}
				}
				
				.ui-treenode-label {
					align-items: center;
					background: transparent;
					border-radius: 0;
					display: flex;
					flex: 1;
					gap: $half-spacing;
					min-height: calc(#{$element-height - $element-droppable-underline});
					outline: 0;
					padding: $slim-spacing;
					transition: background $transition-duration linear;
					
					@media(max-width: 768px) {
						height: $ls-element-height-mobile;
					}
					
					&.ui-state-hover {
						background: $soft-grey;
						box-shadow: none;
					}
					
					&.ui-state-highlight {
						background: $highlight-colour;
						text-shadow: none;
					}
				}
			}
		}
	}
	
	.jeesl-360-viewer {
		border-top: $border;
		margin: -$half-spacing (-#{$regular-spacing + $slim-spacing}) (-#{$half-spacing + $slim-spacing});
		position: relative;
	}
	
	.jeesl-tabs {
		border-left: 0;
		border-right: 0;
		border-top: 0;
		border-radius: 0;
		margin: $half-spacing (-$regular-spacing);
	
		@media (max-width: 768px) {
			margin: $half-spacing (-$regular-spacing);
		}
		
		&:first-child {
			margin-top: -$slim-spacing - $half-spacing
		}
		
		&:last-child {
			border: 0;
			margin-bottom: (-$slim-spacing - $half-spacing);
			
			@media (max-width: 768px) {
				margin-bottom: -$half-spacing;
			}
		}
	}
	
	.vis-timeline {
		border: none;
	}
	
	.ui-panel-content {
		@include input-grid;
		@include image-gallery;
		
		.ui-galleria {
			border: 0;
			margin: -6px -10px -4px;
			max-width: calc(100% + 20px);
			width: calc(100% + 20px) !important;
		}
		
		.ui-separator {
			background: $border-colour;
			border: none;
			height: $separator-thickness;
			margin: $half-spacing #{-$regular-spacing};
			
			@media (max-width: 768px) {
				height: $separator-thickness-mobile;
			}
		}
		
		.jeesl-panelgrid-scrollview {
			overflow-x: auto;
		}
	}
	
	.ui-panel-footer {
		@include jeesl-footer;
	}

	.pvtUi {
		width: 100%;
		
		> tr {
			&:first-child > td {
				border-top: 0;
			}
			
			&:nth-child(2) {
				border-bottom: $header-underline;
			}
			
			> td {
				&:first-child {
					border-left: 0;
				}
				
				&:last-child {
					border-right: 0;
				}
			}
		}
		
		.pvtVals {
			text-align: left;
			
			.pvtAggregator {
				margin-bottom: 0;
			}
		}
		
		.pvtAxisContainer, .pvtVals, .pvtAxisLabel, .pvtColLabel, .pvtTotalLabel, .pvtRowLabel {
			background: $panel-header-gradient;
			box-shadow: $highlight-shadow;
		}
		
		.pvtRendererArea {
			padding: $regular-spacing $regular-spacing 0;
			
			.pvtTable {
				width: 100%;
			}
		}
	}
		
	.pvtUi, .pvtTable {
		th:not(.pvtAxisLabel, .pvtColLabel, .pvtTotalLabel, .pvtRowLabel) {
			background: transparent;
		}
		
		th, td {
			border-color: $border-colour;
		}
	}
	
	.pvt-button {
		margin: $regular-spacing;
	}
}

@mixin float-titlebar-icons {
	.ui-dialog-titlebar, .ui-panel-titlebar, .ui-datatable-header {
		.pf-action-icon, .jeesl-icon {
			float: right;
		}
	}
}

html, body {
	font-size: $font-size;
	height: 100%;
	
	@media (max-width: 768px) {
		font-size: $font-size-mobile;
	}
}

body {
	min-width: $min-content-width;
	padding: $regular-spacing 0;
	
	&:after {
		content: '';
		display: block;
		padding-bottom: 1px;
	}
}

body, .ui-widget {
	font-size: $font-size;
	font-weight: normal;
	
	@media (max-width: 768px) {
		font-size: $font-size-mobile;
	}
}

#container {
	background: $white-100;
	box-shadow: 0 0 $regular-spacing $medium-grey;
	margin: 0 auto;
	max-width: $min-fixed-container-width;
	padding: 0 0 $wide-spacing 0;
	width: auto;
	
	@media (min-width: $max-fixed-container-width) {
		max-width: 100%;
	}
}

.jeesl-header {
	border-bottom: 2px solid $bright-grey;
	height: 41px;
    padding: 3px 0 0;
	position: relative;
	width: 100%;
	z-index: 1001;
	
	@media (max-width: 768px) {
		border-color: transparent;
	}
	
	> a {
		display: inline-block;
		margin: 5px 0 0 10px;
		max-width: $header-logo-width;
		
		.jeesl-logo {
			height: $header-logo-height;
			margin: 0;
			pointer-events: none;
			
			&.jeesl-floating-logo {
				height: $header-floating-logo-height;
			}
		}
	}
	
	ul {
		li {
			display: inline-block;
		}
	}
	
	@include jeesl-burger-icon($dark-colour);
	@include jeesl-burger-icon-size($element-height-mobile, 5px);
	
	.jeesl-burger-menu-icon {
		position: absolute;
		right: 0;
		top: 5px;
		
		@media (max-width: 768px) {
			width: 60px;
		}
	}
	
	@include jeesl-sb-dropdown($anthracite, $white-100, $white-100, $bright-grey, 20);
	
	.jeesl-dropdown-list {
		background: transparent;
		display: inline-block;
		opacity: 1;
		visibility: visible;
		
		@media (max-width: 768px) {
			background: $white-100;
			margin: 0;
			opacity: 0;
			top: 51px;
			visibility: hidden;
			
			&.jeesl-active {
				opacity: 1;
				visibility: visible;
			}
		}
		
		&:not(.jeesl-dropdown-sub) {
			> .jeesl-dropdown-item {
				display: inline-block;
				
				@media (max-width: 768px) {
					display: block;
				}
				
				&:hover {
					&:after {
						border-bottom: 2px solid $dark-colour;
					}
					
					> .jeesl-dropdown-item-label {
						color: $dark-colour;
					}
				}
				
				> .jeesl-dropdown-item-label {
					height: 36px;
					line-height: 22px;
					
					@media (max-width: 768px) {
						height: $ls-element-height-mobile;
						line-height: $ls-element-height-mobile;
					}
				}
			}
		}
		
		.jeesl-dropdown-item {
			background: transparent;
			
			@media (max-width: 768px) {
				display: block;
			}
			
			&.jeesl-active {
				&:after {
					border-bottom-color: $dark-colour;
				}
				
				> .jeesl-dropdown-item-label {
					color: $dark-colour;
				}
			}
			
			&.jeesl-marked {
				.jeesl-dropdown-item-label {
					color: $medium-grey;
					font-style: italic;
				}
				
				&:hover {
					.jeesl-dropdown-item-label {
						color: $dark-colour;
					}
				}
			}
			
			.jeesl-dropdown-item-label {
				@include font-nav;
				
				@media (max-width: 768px) {
					float: none;
					height: 50px;
					line-height: 50px;
					margin-top: 0;
				}
			}
		}
	}
}

.jeesl-breadcrumb-header {
	@include jeesl-menu-bar;
	
	background: $dark-colour;
    height: auto;
    margin: 10px;

	@media (max-width: 768px) {
		height: auto;
	}

	.jeesl-menu-bar-list {
		align-items: stretch;
		display: flex;
		flex-wrap: wrap;
		justify-content: flex-end;
		margin-bottom: 0;
	    right: 0;
	    top: 0;

		// Overriding aupHeadlineBreadcrumb float necessary.
		float: none;
		
		.jeesl-subtitle {
			@include font-regular;
			
			background: $dark-colour;
			flex-grow: 1;
			float: none;
			line-height: calc(#{$element-height} + 4 * #{$slim-spacing});
			padding: 0 $regular-spacing;
			
			@media (max-width: 768px) {
				line-height: $element-height-mobile;
			}
		}

		.jeesl-menu-bar-item {
			&:not(:last-child) {
				.jeesl-menu-bar-button {
					padding-right: 30px;
				
					&:before {
						@include triangle($bright-colour $bright-colour $bright-colour transparent, 15px 1px 15px 15px);
						
						right: 1px;
						z-index: 1;
					}
					
					&:after {
						@include triangle($dark-colour $dark-colour $dark-colour transparent, 15px 1px 15px 15px);
						
						right: 0;
						z-index: 2;
					}
				
					@media (max-width: 768px) {
						padding-right: 36px;
					
						&:before, &:after {
							border-width: 21px 1px 21px 21px;
						}
					}
				}
				
				.jeesl-dropdown-list {
					right: 16px;
					
					@media (max-width: 768px) {
						right: 0;
					}
					
					.jeesl-dropdown-item {
						&:hover {
							.jeesl-dropdown-item-label {
								&:after {
									border-left-color: $dark-colour;
								}
							}
						}
						
						.jeesl-dropdown-item-label {
							&:before, &:after {
								@include triangle(transparent transparent transparent $bright-colour, 15px 1px 15px 15px);
								
								transition: border-color $transition-duration linear;
								
								@media (max-width: 768px) {
									display: none;
								}
							}
							
							&:before {
								right: -16px;
							}
							
							&:after {
								right: -15px;
							}
						}
					}
				}
			}
			
			&:hover {
				.jeesl-menu-bar-button {
					background: $main-background-gradient 12500% 0 / 99% 100% no-repeat;
				}
				
				.jeesl-dropdown-list {
					visibility: visible;
					opacity: 1;
				}
			}
			
			// Overriding aupHeadlineBreadcrumb > li float necessary.
			&.jeesl-right {
				float: right;
			}
			
			.jeesl-menu-bar-button {
				background: $main-background-gradient 0 0 / 100% 99% no-repeat;
				padding: 4px 15px;
				
				@media (min-width: 769px) {
					a.jeesl-menu-bar-button-label {
						+ .jeesl-menu-bar-button-label {
							display: none;
						}
					}
				}
				
				@media (max-width: 768px) {
					padding: 11px 15px 10px 15px;
					
					a.jeesl-menu-bar-button-label {
						display: none;
					}
				}
				
				&.jeesl-menu-bar-popup-button {
					z-index: 1003;
				}
				
				&.jeesl-active {
					background: $main-background-gradient 0 0 / 99% 100% no-repeat;
					
					&:hover {
						background-position: 12500% 0;
					}
					
					@media (max-width: 768px) {
						background-position: 12500% 0;
					}
				}
				
				.jeesl-menu-bar-button-label {
					@include font-breadcrumb;

					padding: 0;
					
					// Blending out the old triangles for the breadcrumbs is necessary.
					&:before, &:after {
						display: none;
					}
					
					// Overriding .aupHeadlineBreadcrumb a styles necessary.
					background: none;
					&:hover {
						background: none;
					}
				}
			}
			
			@include jeesl-sb-dropdown($white-100, $main-background-gradient, $dark-colour, $dark-colour, 10);
			
			.jeesl-dropdown-list {
				.jeesl-dropdown-item {
					@include font-breadcrumb;
					@include font-dropdown;
					
					&:first-child {
						display: none;
						
						@media (max-width: 768px) {
							display: list-item;
						}
					}
				}
			}
		}
	}
}

.status-bar-wrapper {
	display: flex;
	
	form {
		&:last-child {
			flex-grow: 1;
		}
		
		&:not(:first-child) .jeesl-status-bar {
			margin-left: 0;
		}
		
		&:not(:last-child) .jeesl-status-bar {
			margin-right: 0;
		}
	}
}

#fStatusBarHelp .jeesl-status-bar .jeesl-menu-bar-list .jeesl-menu-bar-item .jeesl-menu-bar-button-icon {
	border-right: 1px solid $bright-colour;
}

.jeesl-footer {
	@include jeesl-menu-bar;
	
	color: $body-foreground;
	
	.jeesl-menu-bar-list {
		.jeesl-menu-bar-item {
			@include jeesl-sb-dropdown($white-100, $medium-colour, $dark-colour, $dark-colour);
			
			height: calc(($sb-element-height - 2 * $sb-vertical-padding) * var(--icon-height-multiplier) + 2 * $sb-vertical-padding);
			
			&:hover {
				.jeesl-menu-bar-button {
					background: $dark-colour;
					
					&:not(.jeesl-menu-bar-dropdown).jeesl-active {
						background: $bright-colour;
					}
						
					&.jeesl-disabled {
						background: transparent;
					}
				}
				
				.jeesl-dropdown-list {
					opacity: 1;
					visibility: visible;
				}
			}
			
			.jeesl-menu-bar-button {
				padding: $sb-vertical-padding 0;
				
				.jeesl-menu-bar-button-icon {
					padding: 0 $sb-vertical-padding;
				}
			}
				
			.jeesl-dropdown-list {
				bottom: 100%;
				
				.jeesl-dropdown-item {
					.jeesl-dropdown-item-label {
						display: flex;
						flex-direction: row-reverse;
						height: $ls-element-height;
						padding: $ls-element-padding;
						
						.jeesl-dropdown-item-label-icon {
							margin: 0;
						
							&:not(:last-child) {
								margin-left: $half-spacing;
							}
						}
					}
				}
			}
		}
	}
}

.jeesl-status-bar {
	@include jeesl-menu-bar;
	
	background-image: linear-gradient(to bottom, $dark-colour, $medium-colour);
	background-repeat: repeat;
	background-size: 100% calc(($sb-element-height - 2 * $sb-vertical-padding) * var(--icon-height-multiplier) + 2 * $sb-vertical-padding);
    height: auto;
	line-height: normal;
    margin: -10px 10px 10px;

	@media (max-width: 768px) {
		background-size: 100% $sb-element-height-mobile;
		height: auto;
	}
	
	.jeesl-menu-bar-list {
		display: flex;
		
		@for $i from 1 to 15 {
			> .jeesl-right:nth-child(#{$i}) {
				order: #{15 - $i};
			}
		}
		
		> .jeesl-right:last-child {
			display: flex;
			flex-grow: 1;
			justify-content: flex-end;
			text-align: right;
		}
		
		.jeesl-status-bar-group {
			padding: 0;
			
			&:hover {
				background: transparent;
				height: auto;
			}
			
			&.jeesl-status-bar-center {
				flex-grow: 1;
			}
			
			&.jeesl-status-bar-left .jeesl-status-bar-group-list > .jeesl-menu-bar-item:not(:first-child) .jeesl-menu-bar-button,
			&.jeesl-status-bar-right .jeesl-status-bar-group-list > .jeesl-menu-bar-item:not(:last-child) .jeesl-menu-bar-button {
				.jeesl-menu-bar-button-icon, .jeesl-menu-bar-button-label, .jeesl-menu-bar-button-info, .jeesl-menu-bar-button-summary {
					&:first-child {
						border-left: 1px solid $bright-colour;
					}
				}
			}
			&.jeesl-status-bar-right  .jeesl-status-bar-group-list {
				flex-direction: row-reverse;
			}
			
			.jeesl-status-bar-group-list {
				display: flex;
				flex-wrap: wrap;
				padding: 0;
				
				// Overwrite aupStatusBar rules
				position: initial;
				opacity: 1;
				visibility: visible;
			}
		}
		
		.jeesl-menu-bar-item {
			height: calc(($sb-element-height - 2 * $sb-vertical-padding) * var(--icon-height-multiplier) + 2 * $sb-vertical-padding);
			white-space: nowrap;
			
			@media(max-width: 768px) {
				height: $sb-element-height-mobile;
			}
			
			&:hover {
				.jeesl-menu-bar-button {
					background: $dark-colour;
					
					&:not(.jeesl-menu-bar-dropdown).jeesl-active {
						background: $bright-colour;
					}
						
					&.jeesl-disabled {
						background: transparent;
					}
				}
				
				.jeesl-dropdown-list {
					opacity: 1;
					visibility: visible;
				}
			}
			
			&.jeesl-left {
				.jeesl-dropdown-list {
					left: 0;
					right: auto;
					text-align: left;
				}
			}

			
			.jeesl-menu-bar-button {
				background: $medium-colour;
			    padding: $sb-vertical-padding 0;
				
				@media (max-width: 768px) {
					&.jeesl-active:after {
						opacity: 1;
					}
				}
				
				&.jeesl-menu-bar-popup-button {
					z-index: 1003;
				}
				
				&.jeesl-menu-bar-button-gravatar {
					$grav-border: 1px;
					$grav-margin-h: 6px;
					
					$grav-border-mobile: 1px;
					$grav-margin-mobile-h: 8px;
					$grav-margin-mobile-v: 2px;
					$grav-outline-mobile: 1px;
					
					img {
						border: $grav-border solid hsla(0, 0%, 100%, .5);
						height: 100%;
						margin: 0 $grav-margin-h;
						
						@media (max-width: 768px) {
							border: $grav-border-mobile solid hsla(0, 0%, 100%, .9);
							height: calc(100% - 2 * #{$grav-margin-mobile-v});
							margin: $grav-margin-mobile-v $grav-margin-mobile-h;
							outline: $grav-outline-mobile solid hsla(0, 0%, 100%, .5);
						}
						
						&.grav-shine {
							border: none;
							height: calc(100% - (2 * #{$sb-vertical-padding} + 2 * #{$grav-border}));
							left: $grav-margin-h;
							margin: 0;
							outline: none;
							position: absolute;
							top: $sb-vertical-padding + $grav-border;
							
							@media (max-width: 768px) {
								height: calc(100% - (2 * #{$sb-vertical-padding} + 2 * #{$grav-margin-mobile-v} + 2 * #{$grav-border-mobile}));
								top: $sb-vertical-padding + $grav-margin-mobile-v + $grav-border-mobile;
								left: $grav-margin-mobile-h;
							}
						}
					}
				}
				
				&:not(.jeesl-menu-bar-dropdown).jeesl-active {
					background: $brighter-colour;
				}
				
				&.jeesl-disabled {
					cursor: default;
					
					.ui-commandlink {
						cursor: default;
						filter: grayscale(1);
					}
				}
			
				&.jeesl-menu-bar-button-wrapper {
					padding: 0;
					
					.jeesl-menu-bar-button-link {
						padding: 6px 0;
					}
				}
				
				&.jeesl-menu-bar-dropdown > span {
					height: auto;
					vertical-align: middle;
				}
				
				&:before {
					@include pseudo-overlay();
					
					background: linear-gradient(to bottom, $dark-colour, transparent);
				    display: block;
				    transition: opacity .4s linear;
					z-index: 1;
				}
				
				&:after {
					@include background-overlay($dark-colour);
					
					background: $dark-colour;
					position: absolute;
					top: 0;
					left: 0;
					opacity: 0;
					width: 100%;
					transition: opacity .2s ease-in-out;
					z-index: 0;
				}
				
				> .ui-commandlink {
					align-items: stretch;
				}
				
				> * {
					align-items: center;
					display: flex;
					position: relative;
					z-index: 2;
				}
			
				.ui-commandlink {
					position: relative;
					text-decoration: none;
				}
			
				.jeesl-menu-bar-button-icon {
					padding: 0 6px;
				}
				
				.jeesl-menu-bar-button-label {
					@include font-statusbar;
					
					align-items: center;
					line-height: 12px;
					padding-right: 6px;
					position: relative;
					
					@media (max-width: 768px) {
						line-height: 30px;
					}

					&:first-child {
						padding-left: 6px;
					}
				}
				
				.ui-inputfield {
					min-height: calc(#{$sb-element-height} - 2 * #{$sb-vertical-padding});
				}
			}
			
			@include jeesl-sb-dropdown($white-100, $medium-colour, $dark-colour, $dark-colour);
			
			.jeesl-dropdown-list {
	    		top: 100%;
				z-index: 3;
				
				&.jeesl-dropdown-list-multi {
					&:before {
						display: none;
					}
					
					.jeesl-dropdown-item {
						&:first-child {
							&:hover {
								background: transparent;
							}
							
							&:before {
								background: $dark-colour;
								content: '';
								left: 0;
								visibility: hidden;
								position: absolute;
								width: 100%;
								
								@media (max-width: 768px) {
									height: $ls-element-height-mobile;
									visibility: visible;
								}
							}
							
							&:after {
								display: none;
							}
							
							.jeesl-dropdown-multi-summary {
							    font-style: italic;
							    opacity: .5;
								padding-left: $half-spacing
							}
							
							.jeesl-dropdown-item-label {
								display: inline-block;
								padding: 6px 7px 6px 5px;
								transition: background $transition-duration linear;
								width: auto;
								
								@media (max-width: 768px) {
									padding: 0;
								}
									
								.jeesl-dropdown-item-label-icon:last-child {
									margin: 0;
								}
								
								&:hover {
									background: $dark-colour;
								}
							}
						}
						
						.jeesl-dropdown-item-label {
							@media (max-width: 768px) {
								padding-right: 0;
							}
							
							.jeesl-dropdown-item-label-icon {
								@media (max-width: 768px) {
									padding: 12px 0;
								}
								
								&:last-child {
									padding: 0;
									
									@media (max-width: 768px) {
										padding: 12px;
									}
								}
							}
						}
					}
				}
			
				.jeesl-dropdown-item {
					.jeesl-dropdown-item-label {
						@include font-dropdown;
					
						@media (min-width: 768px) {
							height: 26px;
							padding: 6px 7px;
						}
						
						.jeesl-dropdown-item-label-icon {
							margin: 0;
							
							@media (max-width: 768px) {
								padding: 12px 0;
							}
							
							&:not(:first-child) {
								margin-left: 5px;
								
								 @media (max-width: 768px) {
									margin-left: 0;
								}
							}
							
							&:not(:last-child) {
								margin-right: 5px;
								
								 @media (max-width: 768px) {
									margin-right: 12px;
								}
							}
						}
					}
					
					&.jeesl-dropdown-multiline-item {
						padding: $ls-element-padding;
						
						.jeesl-dropdown-item-title {
							display: block;
							font-weight: bold;
							white-space: nowrap;
							
							@media (max-width: 768px) {
								font-size: $font-size-ls-mobile;
								line-height: math.div($ls-element-height-mobile, 2) - $ls-element-padding-vertical;
								height: math.div($ls-element-height-mobile, 2) - $ls-element-padding-vertical;
							}
						}
						
						.jeesl-dropdown-item-content {
							display: block;
							white-space: normal;
							
							@media (max-width: 768px) {
								font-size: $font-size-ls-mobile;
								line-height: math.div($ls-element-height-mobile, 2) - $ls-element-padding-vertical;
							}
						}
					}
				}
			}
			
			.ui-inputgroup {
				border: $border-width solid $bright-colour;
				border-radius: $border-radius;
				display: inline-block;
				height: calc(100% - 2 * #{$slim-spacing});
				margin: $slim-spacing;
				padding: 0;
				position: relative;
				
				> * {
					height: 100%;
					vertical-align: top;
				}
				
				+ .jeesl-overlay-container {
					margin: -$slim-spacing $half-spacing 0;
					position: absolute;
					min-width: calc(100% - (2 * #{$half-spacing}));
					
					@media (max-width: 768px) {
						margin: 0;
					}
				}
				
				.ui-inputfield {
					background: none;
					color: $white-100;
					text-indent: 0;
					text-shadow: none;
					transition: width .3s ease-in-out;
					width: 80px;
					
					&.ui-state-focus, &.ui-state-filled {
						width: 160px;
					}
					
					&::placeholder {
						color: $brighter-colour;
						font-style: italic;
					}
				}
				
				.jeesl-menu-bar-search-buttons {
					display: flex;
					pointer-events: none;
					position: absolute;
					right: 0;
					top: 0;
				
					.search-btn-light {
						background: transparent;
						border: none;
						box-shadow: none;
						color: $brighter-colour;
						height: 100%;
						opacity: 0;
						pointer-events: none;
						text-shadow: none;
						transition: background .2s linear, opacity .2s linear;
						
						&:hover {
							background: $dark-colour;
							color: $brighter-colour;
						}
						
						&:before, &:after {
							display: none;
						}
						
						&.ui-state-visible {
							opacity: 1;
							pointer-events: all;
						}
						
						.ui-icon {
							align-items: center;
							color: $brighter-colour !important;
							display: flex;
							height: $regular-spacing;
							width: $regular-spacing;
							
							@media (max-width: 768px) {
								height: 100%;
								width: auto;
								
								&.ui-icon-apply {
									height: auto;
									width: 100%;
								}
							}
						}
					}
				}
			}
			
			.jeesl-overlay-container {
				background: $medium-colour;
				border: none;
				border-radius: 0;
				box-shadow: none;
				margin: 0 4px;
				min-width: calc(100% - 8px);
				
				.jeesl-overlay-wrapper {
					.ui-selectonemenu-list {
						@media (max-width: 768px) {
							overflow: hidden;
						}
					
						.ui-selectonemenu-item {
							display: flex;
							flex-direction: column;
							padding: 0;
							
							@media (max-width:768px) {
								height: auto;
								padding: 0 $wide-spacing;
							}
							
							&.jeesl-active {
								.ui-selectonemenu-item-text {
									color: $white-100;
								}
								
								&:hover {
									.ui-selectonemenu-item-text {
										color: $white-100;
									}
								}
								
								&:after {
									border-color: $dark-colour;
								}
								
								background: linear-gradient(to bottom, #{$dark-colour}, #{$medium-colour} #{$ls-element-height-mobile});
							}
							
							&:after {
								font-size: inherit;
    							font-weight: inherit;
								margin: 0 $wide-spacing;
							}
							
							.ui-selectonemenu-item-text {
								flex-grow: 1;
								height: $ls-element-height;
								position: relative;
								
								color: $white-100;
								font-weight: 400;
								line-height: 14px;
								padding: 6px 7px;
								
								@media (max-width: 768px) {
									font-weight: $font-weight-bold;
									font-size: $font-size-ls-mobile;
									height: $ls-element-height-mobile + $separator-thickness-mobile;
									line-height: $ls-element-height-mobile;
									padding: 0 $regular-spacing;
								}
							}
						
							.jeesl-field-tip {
								border-bottom: 0 solid $dark-colour;
								color: $body-foreground;
								height: $ls-element-height;
								position: absolute;
								font-weight: $font-weight-base;
								
								cursor: default;
								font-size: $font-size;
								right: 7px;
								
								@media (max-width: 768px) {
									border-bottom-width: $separator-thickness-mobile;
									height: $ls-element-height-mobile + $separator-thickness-mobile;
									margin-top: -$ls-element-height-mobile - $separator-thickness-mobile;
									overflow: hidden;
									pointer-events: none;
									position: relative;
									right: 0;
									transition: height .2s linear;
									width: 100%;
								}
							
								&:hover {
									.jeesl-field-tip-icon {
										color: $bright-colour;
									}
									
									.jeesl-field-tip-content {
										cursor: default;
										opacity: 1;
										pointer-events: all;
									}
								}
								
								.jeesl-field-tip-icon {
									color: $brighter-colour;
									cursor: pointer;
									font-size: 16px;
									line-height: $ls-element-height;
									
									@media (max-width: 768px) {
										cursor: pointer;
										display: block;
										font-size: 35px;
										height: $ls-element-height-mobile;
										line-height: $ls-element-height-mobile;
										margin-left: calc(100% - #{$ls-element-height-mobile} - #{$slim-spacing});
										pointer-events: all;
										text-align: center;
										width: $ls-element-height-mobile;
									}
								}
								
								.jeesl-field-tip-content {
									@include pseudo-overlay;
									
									bottom: auto;
									display: block;
									left: calc(100% + #{$half-spacing});
									opacity: 0;
									padding: 0;
									pointer-events: none;
									top: calc(-#{$header-element-height} - #{$header-element-underline} - #{$border-width});
									transition: opacity .2s linear;
									
									@media (max-width: 768px) {
										background: none;
										box-shadow: none;
										color: $white-100;
										font-size: $font-size-mobile;
										left: 0;
										opacity: 1;
										overflow: hidden;
										padding: 0;
										pointer-events: all;
										position: relative;
										top: 0;
										width: 100%;
									}
									
									&:before {
										@include triangle(transparent $border-colour transparent transparent, 8px 8px 8px 0);
										
										left: -8px;
										top: calc(#{$header-element-height} + #{$header-element-underline} + #{$border-width} + (#{$ls-element-height} / 2) - 8px);
										
										@media (max-width: 768px) {
											display: none;
										}
									}
									
									&:after {
										@include triangle(transparent $panel-background transparent transparent, 8px 8px 8px 0);
										
										left: -7px;
										top: calc(#{$header-element-height} + #{$header-element-underline} + #{$border-width} + (#{$ls-element-height} / 2) - 8px);
										
										@media (max-width: 768px) {
											display: none;
										}
									}
									
									.jeesl-grid {
										@media (max-width: 768px) {
											margin: 0;
											padding-bottom: 5px;
										}
									}
								}
							}
						}
					}
				}
			}
		}
		
		.jeesl-menu-bar-calendar-item {
			display: flex;
			padding: 0;
			top: 0;
			
			@media (max-width: 768px) {
				height: $sb-element-height-mobile;
			}
			
			&.jeesl-left:not(:first-child):before, &.jeesl-right:not(:last-child):before {
				@include jeesl-sb-separator;
			}
			
			&:hover {
				background: transparent;
			}
			
			.jeesl-menu-bar-calendar-item-list {
				align-items: center;
				display: flex;
				height: 100%;
			    opacity: 1;
				padding: 0;
				position: relative;
			    visibility: visible;
				
				.jeesl-calendar-icon {
					@include vertical-center(before);
					
					height: $sb-element-height;
					padding: $sb-vertical-padding $slim-spacing;
					
					@media (max-width: 768px) {
						height: $sb-element-height-mobile;
					}
					
					&:first-child {
						padding-left: $sb-vertical-padding;
					}
					
					&:last-child {
						padding-right: $sb-vertical-padding;
					}
					
					> * {
						height: 100%;
					}
				}

				.jeesl-menu-bar-item {
					&:before {
						display: none;
					}
					
					.jeesl-menu-bar-button {
						cursor: text;

						.ui-inputfield {
							background: transparent;
							color: $white-100;
							height: auto;
							padding: 0 !important;
							text-align: center;
							text-shadow: none;
							width: 55px;
							
							@media (max-width: 768px) {
								max-height: $sb-element-height-mobile;
								width: 71px;
							}
						}
					}
				}
			}
		}
		
		.jeesl-menu-bar-radio-item, .jeesl-menu-bar-radio-item:hover {
			background: transparent;
			display: flex;
			height: 100%;
			margin: 0;
			padding: 0;
			top: 0;
			
			&.jeesl-left:not(:first-child):before, &.jeesl-right:not(:last-child):before {
				@include jeesl-sb-separator;
			}
			
			&:after {
				display: none;
			}
			
			.jeesl-menu-bar-radio-item-list, .jeesl-menu-bar-radio-item-list:hover {
			    display: inline-block;
			    height: 100%;
			    opacity: 1;
				padding: 0;
			    position: inherit;
				visibility: visible;
				
				.jeesl-menu-bar-item {
					display: inline-block;
					
					&:last-child:after {
						display: none;
					}
					
					&:not(:first-child) .ui-commandlink .jeesl-menu-bar-button-label {
						border-left: $border-width solid $darker-colour;
					}
				}
			}
		}
	}
}

.jeesl-panel, .jeesl-tree, .jeesl-datatable, .jeesl-tabs, .html-container-panel {
	margin-bottom: $regular-spacing;
	
	.ui-panel-content {
		overflow: hidden;
	}
}

.jeesl-panel {
	@include jeesl-panel;
}

.jeesl-tree {
	background: $panel-background;
	
	.ui-widget-content {
		background: transparent;
		
		.ui-treenode {
			@include icon-default-size;
			
			.jeesl-disabled {
				> .ui-treenode-content > .ui-treenode-label {
				    font-style: italic;
					opacity: .5;
				}
			}
		}
	}
}

.ui-fieldset {
	background: $panel-background;
	margin-bottom: $regular-spacing;
	
	.ui-fieldset-legend {
		@include button;
		
		align-items: center;
		display: flex;
		font-size: 1em;
		justify-content: center;
		margin: 0;
		padding: 0 $regular-spacing;
		position: relative;
		transition: background .2s linear, color .2s linear;
		
		@media (max-width: 768px) {
			border-width: $border-width;
			font-size: $font-size-header;
			
			&:after {
				margin-left: -1px - $regular-spacing;
			}
		}
		
		.ui-fieldset-toggler {
			@include icon;
			
			margin-right: $half-spacing;
			
			&:before {
				font-size: 1em;
			}
		}
	}
}

@mixin jeesl-footer-action-container {
	align-items: center;
	display: flex;
	flex-wrap: wrap;
	justify-content: center;
	
	> a {
		background: transparent;
		border: none;
		border-radius: 0;
		box-shadow: none;
		color: $body-foreground;
		height: $element-height;
		margin: 0;
		padding: 0;
		transition: background $transition-duration linear;
		
		@media (max-width: 768px) {
			height: $element-height-mobile;
		}
		
		&.ui-state-hover, &:hover {
			background: $soft-grey;
			text-decoration: none;
		}
		
		.ui-outputlabel {
			align-items: center;
			cursor: pointer;
			display: flex;
			height: 100%;
			padding: 0 $half-spacing;
		}
	}
}

.jeesl-datatable, .ui-datatable.ui-sortable-helper, .ui-selectonemenu-panel .ui-selectonemenu-table {
	@include jeesl-table-titlebar;
	
	border: $border;
	border-radius: $border-radius;
	overflow: hidden;
	
	&.jeesl-datatable-collapsible {
		&.jeesl-active .ui-datatable-header {
			border-radius: $border-radius-top;
			transition: border-radius 0s linear;
				
			.pf-datatable-header-title:after {
				transform: rotate(180deg);
				text-shadow: 0 -1px $white-100;
			}
		}
		
		.ui-datatable-header {
			border-radius: $border-radius;
			cursor: pointer;
    		transition: border-radius $transition-duration $transition-duration linear;

			@media (max-width: 768px) {
				border-radius: $border-radius-top;
			}
			
			&:hover {
				&:before {
					opacity: 1;
				}
			}
			
			&:before {
				@include background-overlay($soft-grey);
				
				z-index: 1;
			}
			
			.pf-datatable-header-title, .pf-datatable-header-actions {
				z-index: 2;
			}
			
			.pf-datatable-header-title {
				display: flex;
				justify-content: space-between;
				
				&:after {
					content: '\f0d7';
					font-family: 'Font Awesome 5 Free';
					font-size: 2.5em;
					transition: transform .2s ease-in-out, text-shadow .2s;
				}
			}
		}
	}
	
	table {
		border-collapse: collapse;
		border-style: hidden;
		height: 100%;
		table-layout: auto;
		
		@media (max-width: 768px) {
			thead th, tbody tr, tfoot tr {
				height: $element-height-mobile;
			}
		}
		
		thead th {
			border-top: 0;
			box-shadow: 0 -1px 0 inset $white-35;
			position: relative;
			
			&.jeesl-column-min-width {
				white-space: nowrap;
			}
			
			&.jeesl-datatable-header-vertical {
				text-align: center;
				vertical-align: middle;
				
				.ui-column-title {
					-ms-writing-mode: tb-rl;-webkit-writing-mode: vertical-lr;writing-mode: vertical-lr;
					vertical-align: middle;
					padding: 6px 0;
					transform: rotate(180deg);
					min-width: 12px;
				}
			}
			
			&.ui-sortable-column {
				&.ui-state-hover, &.ui-state-active {
					background-color: $light-grey;
					border-color: $border-colour;
				}
				
				.ui-column-title {
					margin-right: 5px;
					pointer-events: none;
					
					@media (max-width: 768px) {
						margin-right: 16px;
					}
				}
				
				.ui-icon {
					margin: 0;
					position: absolute;
					right: 4px;
					top: 3px;
					
					&.ui-icon-triangle-1-s {
						top: 5px;
					}
					
					&.ui-icon-triangle-1-n {
						top: 1px;
					}
				}
			}
			
			&.ui-filter-column .ui-column-title {
				display: block;
				margin-bottom: $header-element-height;
				padding-bottom: 5px;
				
				@media (max-width: 768px) {
					margin-bottom: $header-element-height-mobile;
				}
			}
			
			.ui-column-title .ui-widget {
				font-weight: 700;
			}
			
			.ui-inputfield {
				bottom: 0;
				left: 50%;
				margin-bottom: $half-spacing;
				min-width: $element-height;
				position: absolute;
				transform: translateX(-50%);
				width: calc(100% - 2 * $half-spacing) !important;
				
				@media (max-width: 768px) {
					height: $element-height-mobile;
					min-width: $element-height-mobile;
				}
			}
		}
		
		thead th, tbody td {
			&.jeesl-min-width-column {
				white-space: nowrap;
				width: 0px;
			}
		}
		
		.jeesl-cell-select {
			transition: border-color .2s linear;
			
			&.selected {
				border-color: $dark-colour;
			}
			
			label {
				align-items: center;
				cursor: pointer;
				display: flex;
				height: 100%;
			}
		}
		
		tfoot td {
			@include jeesl-footer;
			
			background: $panel-background;
			text-align: left;
		}
	}
		
	tbody, .ui-datatable-data {
		background: $panel-background;
		border: none;
		
		tr {
			background: transparent;
			border: none;
			border-color: $soft-grey $light-grey;
			
			&:nth-child(2n) {
				background: $white-50;
			}
		}
		
		tr, .jeesl-cell-select > label {
			transition: background $transition-duration linear, border-color $transition-duration linear;
		}
		
		td {
			@include icon-default-size;
			
			border-color: inherit;
			border-width: 0 0 $border-width $border-width;
			padding: $half-spacing $regular-spacing;
			
			&.jeesl-column-min-width {
				width: 0;
			}
			
			&.jeesl-cell-select {
				padding: 0;
				
				label {
					padding: $half-spacing $regular-spacing;
				}
			}
			
			> * {
				vertical-align: middle;
			}
		}
		
		tr.ui-state-hover, .jeesl-cell-select > label:not(.selected):hover {
			background: $light-grey;
			box-shadow: none;
			border-color: $soft-grey $light-grey;
		}
		
		tr.ui-state-highlight, .jeesl-cell-select > label.selected {
			background: $highlight-colour;
			border-color: $dark-colour;
			color: $white-100;
			font-weight: 500;
			text-shadow: none;
		}
	}
	
	.ui-datatable-footer, .ui-paginator {
		border: $border;
		border-width: $border-width 0 0;
		box-shadow: 0 -1px 0 inset $white-35;
		min-height: $element-height;
		padding: 0;
		
		@media (max-width: 768px) {
			border-radius: $border-radius-bottom;
			min-height: $element-height-mobile;
		}
		
		.ui-datatable-footer-actions {
			@include jeesl-footer-action-container;
		}
	}
	
	.ui-paginator {
		@include jeesl-footer-action-container;
		
		
		.ui-paginator-first, .ui-paginator-prev, .ui-paginator-next, .ui-paginator-last {
			overflow: hidden;
			width: $element-height;
			
			@media (max-width: 768px) {
				width: $element-height-mobile;
			}
		}
		
		.ui-paginator-prev {
			.ui-icon:before {
				@media (max-width: 768px) {
					border-right: $border-width solid $border-colour
				}
			}
		}
		
		.ui-icon {
			@include icon();
			@include vertical-center(after);
			
			height: 100%;
			white-space: nowrap;
			width: 100%;
			
			@media (max-width: 768px) {
				height: calc(#{$element-height-mobile} - 13px);
				margin: $header-icon-padding-vertical;
			}

			&:before {
				align-items: center;
				display: flex;
				font-size: .9em;
				height: 100%;
				justify-content: center;
				vertical-align: middle;
				width: 100%;

				@media (max-width: 768px) {
					border-left: $border-width solid $border-colour;
					font-size: 1.5em;
				}
			}
		}
		
		.ui-paginator-current {
			align-items: center;
			display: flex;
			margin: 0 $half-spacing;
			min-height: $element-height;
			
			@media (max-width: 768px) {
				min-height: $element-height-mobile;
			}
		}
		
		.ui-paginator-rpp-options {
			background: transparent;
			border: none;
			border-radius: 0;
			cursor: pointer;
			box-shadow: none;
			height: $element-height;
			margin: 0;
			outline: none;
			transition: background $transition-duration linear;
			
			@media (max-width: 768px) {
				height: $element-height-mobile;
			}
			
			&.ui-state-hover, &:hover {
				background: $soft-grey;
			}
			
			option {
				background: $dark-colour;
				color: $white-100;
			}
		}
	}
	
	.ui-datatable-footer {
		border: none;
		border-radius: 0;
		border-top: $border;
	}
}

.jeesl-datatable {
	background: $panel-background;
	
	.jeesl-heatbar-wrapper {
		display: flex;
		gap: $half-spacing;
	}
}

.ui-selectonemenu-panel .ui-selectonemenu-table {
	border: 0;
	width: auto;
	
	&.ui-helper-hidden {
		display: none;
	}
	
	tbody tr {
		&:last-child td {
			border-bottom-width: 0;
		}
		
		td {
			border-width: 0 0 $border-width 0;
			padding: $half-spacing 0;
			text-align: center;
		}
	}
}

.jeesl-content-container, .jeesl-overlay-container {
	line-height: 1.25em;
	
	@for $i from 1 to 13 {
		.jeesl-row-#{$i} {
			width: calc((100% / 12) * #{$i});
			
			@media (max-width: 768px) {
				width: 100%;
			}
		}
		
		.jeesl-grid-#{$i} {
			width: calc((100% / 12) * #{$i} - (2 * #{$half-spacing}));
			display: inline-block;
			vertical-align: top;
			
			> *:not(.jeesl-dialog):not([class^="jeesl-grid-"]):not([class*=" jeesl-grid-"]) {
				width: 100%;
			}
			
	
			@media (max-width: 768px) {
				width: calc(100% - 10px);
			}
		}
		
		.jeesl-grid.height-balance-container > .jeesl-grid-#{$i} {
			height: 100%;
			width: calc((100% / 12) * #{$i} - #{$half-spacing});
		
			&:first-child {
				margin-left: 0;
			}
			
			&:last-child {
				margin-right: 0;
			}
			
			> * {
				height: calc(100% - #{$regular-spacing});
			}
		}
	}
}

.jeesl-content {
	display: flex;
	float: none;
	padding: 0 $regular-spacing;
	
	.jeesl-content-center {
		display: flex;
		flex-grow: 1;
		min-width: 0;
	}
	
	.jeesl-content-container {
		padding: 0;
		width: 100%;
		
		.jeesl-row {
			align-items: stretch;
			display: flex;
			flex-wrap: wrap;
			
			&.jeesl-row-rtl {
				flex-flow: row-reverse wrap-reverse;
			}
			
			.jeesl-grid {
				@media (max-width: 768px) {
					margin-top: $regular-spacing;
				}
				
				&.jeesl-grid-image {
					text-align: right;
					
					@media (max-width: 768px) {
						max-width: 30%;
					}
					
					> img {
						height: auto;
						max-height: 100%;
						position: absolute;
						right: 0;
					}
				}
			}
		}
		
		.jeesl-grid {
			margin: 0 $half-spacing;
			position: relative;
			
			&.jeesl-height-master {
				display: flex;
				flex-wrap: wrap;
			}
			
			&.jeesl-flow-layout > form {
				display: flex;
				flex-wrap: wrap;
				row-gap: $regular-spacing;
			}
			
			form {
				.jeesl-panel .jeesl-form-button {
					margin-top: $regular-spacing;
				}
			}
			
			.jeesl-panel form {
				&:last-child {
					margin-bottom: 0;
				}
				
				.jeesl-form-button {
					margin-top: $regular-spacing;
				}
			}
		}
		
		.ui-panel {
			@include jeesl-panel;
		}
	}
}

.jeesl-content-right {
	flex-shrink: 0;
	
	@media (max-width: 768px) {
		display: none;
	}
	
	.jeesl-sidemenu {
		width: calc(100% - 10px);
    	margin: 10px 5px 0;

		.jeesl-menu-bar-button {
			display: none;
		}
		
		.jeesl-dropdown-list {
			list-style: none;
			margin: 0;
			padding: 0;
			
			.jeesl-dropdown-item {
				position: relative;
    			background: $main-background-gradient;

				&:hover:before {
					opacity: 1;
				}

				&:before {
					@include background-overlay($dark-colour);
				}

				.jeesl-dropdown-item-label {
				    background: transparent;
				    border-bottom: 1px solid $white-100;
				    color: $white-100;
				    display: block;
				    height: 26px;
				    line-height: 26px;
					max-width: none;
				    padding: 0 $regular-spacing;
				    position: relative;
				    text-align: right;
					text-indent: 0;
					white-space: nowrap;
					
					&:hover {
						text-decoration: none;
					}
				}
			}
		}
	}
}

.ui-dialog {
	@include jeesl-dialog-titlebar;

	background: $panel-background;
	max-width: $min-fixed-container-width;
	
	&.ui-hidden-container {
		display: none;
	}
	
	@for $i from 1 to 13 {
		&.jeesl-dialog-#{$i} {
			width: calc(100% * (#{$i} / 12)) !important;
			
			@media (max-width: $min-fixed-container-width) {
				width: calc(100% * (#{$i} / 12)) !important;
			}
	
			@media (max-width: 768px) {
				left: 15px !important;
				transform: translate(0, -50%);
				width: calc(100% - 30px) !important;
			}
		}
	}
	
	&.jeesl-dialog {
		border: $border;
		overflow: visible;
	}
	
	&.jeesl-multipanel-dialog {
		background: transparent;
		border: none;
		box-shadow: none;
		
		.ui-dialog-titlebar {
			border: $border;
			border-radius: $border-radius;
			box-shadow: $overlay-shadow;
		}
		
		.ui-dialog-content {
			overflow: visible;
			padding: $regular-spacing 0 $half-spacing;
			
			.jeesl-panel, .jeesl-datatable {
				box-shadow: $overlay-shadow;
			}
		}
	}
	
	&.jeesl-table-dialog {
		.ui-dialog-titlebar {
			margin: 0;
			
			@media (max-width: 768px) {
				margin-bottom: 4px;
			}
		}
		
		.ui-widget-content {
			padding: 0;
			
			table {
				thead, tbody {
					border: 0;
					
					tr {
						border: 0;
						
						th, td {
							border: $border;
							
							&:first-child {
								border-left: 0;
							}
							
							&:last-child {
								border-right: 0;
							}
						}
					}
				}
				
				thead tr:first-child th {
					@media (max-width: 768px) {
						border-top: 0;
					}
				}
				
				tbody tr:last-child, tbody tr:last-child td {
					border-bottom: 0;
				}
			}
		}
	}

	&:not(.jeesl-dialog) {
		.ui-dialog-titlebar {
			align-items: stretch;
			
			.ui-dialog-title {
				padding-left: $regular-spacing;
			}
			
			.ui-dialog-titlebar-icon {
				align-items: stretch;
				background: transparent;
				border: none;
				box-shadow: none;
				color: $body-foreground;
				display: flex;
				float: none;
				padding: 0;
				text-decoration: none;
				transition: background $transition-duration linear;
				width: $header-element-height;
				
				.ui-icon {
					align-items: center;
					display: flex;
					flex-grow: 1;
					justify-content: center;
					
					&:hover {
						background: $header-background-colour;
					}
					
					&:before {
						font-size: 1.3em;
					}
				}
			}
		}
		
		.ui-dialog-buttonpane {
			display: flex;
			gap: $half-spacing;
			margin: 0;
			padding: $regular-spacing;
			
			.ui-button {
				margin: 0;
			}
		}
	}
	
	&.multi-panel-dialog {
		background: none;
		border: none;
		box-shadow: none;
		overflow: visible;
		
		.ui-dialog-titlebar {
			background: $status-bar-background-gradient;
			border: none;
			border-radius: $border-radius;
			box-shadow: none;
			gap: $regular-spacing;
			justify-content: flex-end;
			margin-bottom: $regular-spacing;
			padding: $half-spacing;
			
			&:after {
				display: none;
			}
			
			.ui-dialog-title {
				color: $white-100;
				flex-grow: 0;
				font-size: 1.1em;
				text-shadow: none;
				text-transform: uppercase;
			}
			
			.ui-dialog-titlebar-icon {
				@include button;

				border-radius: $border-radius;
				box-shadow: $highlight-shadow, $overlay-shadow;
				position: relative;
				transition: box-shadow $transition-duration linear;
			}
		}
		
		.ui-dialog-content {
			overflow: visible;
			padding: 0;
			
			> .jeesl-row > * {
				box-shadow: $overlay-shadow;
				margin-bottom: $regular-spacing;
			}
		}
	}

	.ui-dialog-content {
		@include jeesl-ck-editor;
		
		padding: $half-spacing $regular-spacing;
		margin-bottom: 0;
		width: 100% !important; // Fix for primefaces incorrectly calculating width after resize.
		
		@media (max-width: 768px) {
			margin: 0;
		}
		
		.ui-resizable-handle {
			@media (max-width: 768px) {
				display: none;
			}
		}
		
		.ui-texteditor, .jeesl-ck-editor {
			margin-left: -$regular-spacing;
			margin-right: -$regular-spacing;
			border-width: $border-width 0;
			
			&:first-child {
				border-top-width: 0;
				margin-top: -$half-spacing;
			}
			
			&:last-child {
				border-bottom-width: 0;
				margin-bottom: -$half-spacing;
			}
		}
		
		.jeesl-panel .ui-datatable {
			border: none;
			border-radius: 0;
			margin: 0;
		}
	}
	
	.ui-dialog-footer {
		@include jeesl-footer;
	}
}

.jeesl-tabs {
	@include jeesl-tabs-titlebar;
		
	background: $panel-background;
	padding: 0;
	
	@media (max-width: 768px) {
		padding: 0;
	}
		
	&.ui-tabs-top {
		.ui-tabs-nav {
			padding: #{$slim-spacing - $border-width} $slim-spacing 0;
		}
	}
	
	&.jeesl-editor {
		@include jeesl-editor-layout;
		
		.ui-tabs-panel {
			.ui-texteditor, .jeesl-ck-editor {
//				margin-left: -$slim-spacing;
//				margin-right: -$slim-spacing;
				
				@media (max-width: 768px) {
					margin-left: -$regular-spacing;
					margin-right: -$regular-spacing;
				}
				
				&:first-child {
					border-top: none;
				}
				
				&:last-child {
					border-bottom-width: 0;
//					margin-bottom: -$slim-spacing;
				
					@media (max-width: 768px) {
						margin-bottom: -$half-spacing;
					}
				
					.ql-container {
						border-radius: $border-radius-bottom;
					}
				}
			}
		}
	}
	
	.ui-tabs-panels {
		padding: $half-spacing $regular-spacing;
		
		.ui-tabs-panel > pre:last-child {
			margin-bottom: 0;
		}
	}
}

.fc {
	.fc-toolbar {
		display: flex;
		flex-wrap: wrap;
		margin: 0;
		
		.fc-left {
			order: 1;
			
			@media (max-width: 768px) {
				order: 2;
			}
		}
		
		.fc-center {
			flex-grow: 1;
			order: 2;
			
			@media (max-width: 768px) {
				margin: 0 0 $wide-spacing;
				order: 1;
				width: 100%;
			}
		}
		
		.fc-right {
			order: 3;
		}
		
		.fc-left, .fc-center, .fc-right {
			float: none;
			margin-bottom: $wide-spacing;
			
			&:before {
				content: '';
			    height: 100%;
			    display: inline-block;
			    vertical-align: middle;
			}
			
			> * {
				display: inline-block;
				float: none;
				vertical-align: middle;
			}
		}
	}
	
	.fc-head {
		@include jeesl-titlebar;
		
		border-radius: $border-radius-top;
		margin: 0;
		padding: 0;
		
		@media (max-width: 768px) {
			border-width: $border-width $border-width 0;
		}
		
		.fc-head-container {
			border: none;
			
			.fc-row {
				border: none;
				margin: 0 !important;
				
				.fc-day-header {
					border-color: $border-colour;
					height: $element-height;
					vertical-align: middle;
					
					@media (max-width: 768px) {
						height: $element-height-mobile;
					}
					
					> span {
						@include jeesl-titlebar-title;
					}
				}
			}
		}
	}
	
	.fc-body {
		display: flex;
		
		td {
			border: $border;
			border-top: none;
			background: $panel-background;
		}
		
		.fc-scroller {
			height: auto !important;
			overflow: hidden !important;
			
			.fc-bg td {
				border: $border;
				border-color: $soft-grey;
			
				&.fc-today {
					background: $bright-colour;
					opacity: .5;
				}
			}
			
			.fc-content-skeleton .fc-event {
				background: $status-bar-background-gradient;
				border: none;
				font-size: 1em;
				line-height: normal;
				padding: $half-spacing;
				
				&[class*='color-']:before {
					opacity: 1;
				}
				
				&:before {
					background: linear-gradient(to bottom, hsla(0, 0%, 0%, .3), hsla(0, 0%, 100%, .4));
				    bottom: 0;
				    content: '';
				    left: 0;
				    opacity: 0;
				    position: absolute;
				    right: 0;
				    top: 0;
				}
				
				.fc-content {
					display: -webkit-box;
					line-clamp: 2;
					overflow: hidden;	
					text-overflow: ellipsis;
					white-space: normal;
					-webkit-box-orient: vertical;
					-webkit-line-clamp: 2;
				}
			}
		}
	}
}

.jeesl-revision-footer {
	display: flex;
	justify-content: space-between;
	
	> *:not(:last-child) {
		margin-right: $half-spacing;
	}
	
	.jeesl-revision-timestamp {
		flex-grow: 1;
	}
}

.jeesl-footer {
    display: flex;
    justify-content: space-between;
    margin: $regular-spacing auto;
	max-width: $min-fixed-container-width;
	padding: 0 $regular-spacing;
	
	@media (min-width: $max-fixed-container-width) {
		max-width: 100%;
	}
}

.jeesl-input-grid {
	&:not(:last-child) {
		margin-bottom: $regular-spacing;
	}
	
	.p-field {
		.p-col {
			@include icon-default-size;
			
			&:not(.ui-outputlabel) {
				min-height: $element-height;
				
				@media (max-width: 768px) {
					min-height: $element-height-mobile;
				}

				> * {
					min-width: $element-height !important;
					
					@media (max-width: 768px) {
						min-width: $element-height-mobile !important;
					}
				}
				
				.jeesl-input-grid-icon {
					height: $input-field-icon-height;
					
					@media (max-width: 768px) {
						height: $input-field-icon-height-mobile;
					}
					
					&.jeesl-input-grid-locale-icon {
						min-height: $input-field-icon-height;
						
						@media (max-width: 768px) {
							height: $input-field-icon-height-mobile;
							width: auto;
						}
					}
				}
				
				.jeesl-ck-editor {
					border-radius: $border-radius;
					margin: 0;
				}
			}
		}
	}
}

.pf-action-icon {
	float: none;
	
	@media (max-width: 768px) {
		img {
			height: calc($element-height-mobile * var(--icon-height-multiplier));
		}
	}
}

.jeesl-heatmap {
	display: flex;
	flex-direction: column;
	gap: 2px;
	
	.jeesl-heatmap-row {
		display: flex;
		gap: 2px;
	
		.jeesl-heatmap-entry {
			background: $dark-colour;
			height: 12px;
			width: 12px;
		}
	}
}


.jeesl-ellipsis {
	display: -webkit-box;
	overflow: hidden;
	-webkit-box-orient: vertical;
	-webkit-line-clamp: 2;
}

.jeesl-upload-panel {
	background: transparent;
	border: none;
	box-shadow: none;
	
	.ui-overlaypanel-content {
		padding: 0;
	}
	
	.jeesl-grid {
		margin: 0 !important;
		width: 100%;
		
		> form {
			border-radius: $border-radius;
			box-shadow: $overlay-box-shadow;
		}
	}
}

.jeesl-fileupload {
	@include jeesl-fileupload-titlebar;
	
	border: $border;
	border-radius: $border-radius;
	
	.ui-fileupload-content {
		background: transparent;
		padding: $slim-spacing;
		
		.ui-fileupload-files {
			margin: 0;
			width: 100%;
			
			.ui-fileupload-row {
				> div {
					vertical-align: middle;
					white-space: nowrap;
				}
				
				.ui-fileupload-preview {
					display: none;
				}
				
				.ui-fileupload-filename {
					display: table-cell;
					white-space: break-spaces;
				}
				
				.ui-fileupload-progress .ui-progressbar {
					top: 0;
					
					.ui-progressbar-value {
						background: $bright-colour;
						border: none;
						border-radius: 1px;
					}
				}
				
				.ui-fileupload-cancel .ui-icon:before {
					content: $icon-cancel;
					font-family: "Font Awesome 5 Free" !important;
					font-weight: 700;
				}
			}
		}
	}
}

.jeesl-vertical-nospace {
	border-bottom-left-radius: 0;
	border-bottom-right-radius: 0; 
	margin-bottom: 0;
	
	+ *, + * *:first-child {
		border-top-left-radius: 0;
		border-top-right-radius: 0; 
		margin-top: 0;
	}
	
	*:last-child {
		border-bottom-left-radius: 0;
		border-bottom-right-radius: 0; 
		margin-bottom: 0;
	}
}

.jeesl-captcha-img {
	border-radius: $border-radius;
	display: inline-block;
	overflow: hidden;
	position: relative;
	
	&:before {
		@include pseudo-overlay;
		
		border: $border;
		border-radius: inherit;
	}
	
	> img {
		border-radius: #{1 + $border-radius};
	}
}

.jeesl-panel-ai-chat {
	.jeesl-ai-chat-message {
		display: flex;
		flex-direction: column;
		
		.ui-outputlabel {
			align-items: center;
			display: flex;
			padding: $half-spacing 0 $slim-spacing;
			
			&:before {
				align-items: center;
				background: $dark-colour;
				border-radius: 50%;
				color: $white-100;
				display: flex;
				font-size: 10px;
				justify-content: center;
				margin-right: $half-spacing;
				height: $wide-spacing;
				width: $wide-spacing;
			}
			
			&.jeesl-ai-chat-request:before {
				content: 'Q';
			}
			
			&.jeesl-ai-chat-response:before {
				content: 'A';
			}
		}
		
		.jeesl-ai-chat-text {
			padding: 0 #{$half-spacing + $wide-spacing};
		}
	}
	
	.jeesl-input-container {
		margin: $regular-spacing #{-$regular-spacing} #{-$half-spacing};
		
		.ui-inputfield {
			border-radius: 0 0 0 $border-radius;
			width: 85%;
		}
		
		.ui-button {
			border-width: $border-width 0 0 $border-width;
			border-radius: 0 0 $border-radius;
			margin: 0;
		}
	}
}

@import '_responsiveHtmlRender';
@import '_responsivePrint';