<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
	  xmlns:p="http://primefaces.org/ui"
	  xmlns:j="http://www.jeesl.org/jsf"
	  xmlns:jp="http://jsf.jeesl.org/prototype"
	  xmlns:aup="http://ahtutils.sourceforge.net/prototype"
	  xmlns:aht="http://ahtutils.sourceforge.net/jsf"
	  xmlns:composite="http://java.sun.com/jsf/composite">

	<composite:interface>
		<composite:attribute name="handler" required="true"/>
		<composite:attribute name="update"/>
		
		<composite:attribute name="appBean" required="false" default="#{appSettingsBean}"/>
	</composite:interface>

	<composite:implementation>
		<j:li styleClass="aupStatusBarRight jeesl-menu-bar-calendar-item jeesl-right">
			<ul class="jeesl-menu-bar-calendar-item-list">
				<c:if test="#{not empty cc.attrs.handler.dateFrom}">
					<jp:sbItem orientation="left">
						<f:facet name="label">
							<p:calendar styleClass="aupStatusBarCalendar aupStatusBarDpFirst jeesl-menu-bar-button-label jeesl-menu-bar-button-calendar"
											value="#{cc.attrs.handler.dateFrom}"
											pattern="#{cc.attrs.appBean.patternDate}"
											mindate="#{cc.attrs.handler.minFrom}"
											maxdate="#{cc.attrs.handler.maxFrom}">
		                        <p:ajax update="#{cc.attrs.update}" event="dateSelect" listener="#{cc.attrs.handler.dateChanged()}"/>
		                        <p:ajax update="#{cc.attrs.update}" event="change" listener="#{cc.attrs.handler.dateChanged()}"/>
		                    </p:calendar>
	                    </f:facet>
					</jp:sbItem>
				</c:if>
				<p:outputLabel styleClass="jeesl-calendar-icon jeesl-left">
					<p:graphicImage library="jeeslGfx" name="#{appIconBean.svg['jeeslCalendar']}"/>
				</p:outputLabel>
				<c:if test="#{not empty cc.attrs.handler.dateTo}">
					<jp:sbItem orientation="left">
						<f:facet name="label">
		                    <p:calendar styleClass="aupStatusBarCalendar jeesl-menu-bar-button-label jeesl-menu-bar-button-calendar"
		                    			value="#{cc.attrs.handler.dateTo}"
		                    			pattern="#{cc.attrs.appBean.patternDate}"
		                    			mindate="#{cc.attrs.handler.minTo}"
		                    			maxdate="#{cc.attrs.handler.maxTo}">
		                        <p:ajax update="#{cc.attrs.update}" event="dateSelect" listener="#{cc.attrs.handler.dateChanged()}"/>
		                        <p:ajax update="#{cc.attrs.update}" event="change" listener="#{cc.attrs.handler.dateChanged()}"/>
		                    </p:calendar>
	                    </f:facet>
					</jp:sbItem>
				</c:if>
			</ul>
		</j:li>
	</composite:implementation>
</html>