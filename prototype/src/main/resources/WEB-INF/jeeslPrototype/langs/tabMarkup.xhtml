<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
	xmlns:jtp="http://jsf.jeesl.org/prototype/tag"
>	
	<ui:fragment rendered="#{locales.size() eq 1}">
  		<jtp:inputMarkup value="#{value[locales[0].code]}"/>
  	</ui:fragment>

	<p:tabView var="l" value="#{locales}" rendered="#{locales.size() gt 1}">  
  		<p:tab title="#{l.code}">
  			<p:selectOneMenu value="#{value[l.code].type}" effect="fade" rendered="false">  
                <f:selectItems value="#{markups}" var="m" itemLabel="#{m.name[localeCode].lang}" itemValue="#{m}"/>
            </p:selectOneMenu>
  		
  			<jtp:inputMarkup value="#{value[l.code]}"/>
  			
  		</p:tab>  
  	</p:tabView>
  	
</ui:composition>