<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:jtp="http://jsf.jeesl.org/prototype/tag"
    xmlns:aht="http://ahtutils.sourceforge.net/jsf"
>

	
	<h:form id="fFiles" rendered="#{(not empty monitoringContractReportBean.report) and (monitoringContractReportBean.report.id gt 0)}">
		<p:dataTable var="f" value="#{handler.files}" rowKey="#{f.name}"
					 	selection="#{handler.file}" selectionMode="single">
			<f:facet name="header">
				<aht:pfDataTableHeader title="#{appLabelBean.labels['MeisLcfSubmission']['uploadsSummary'][localeCode].lang}">
					<aht:icon type="jeeslAdd" listener="#{monitoringContractReportBean.addFile()}" update=":opUpload" oncomplete="PF('wvUpload').show();"/>
				</aht:pfDataTableHeader>
			</f:facet>
			<p:ajax event="rowSelect" update=":fDownload" listener="#{monitoringContractReportBean.selectFile()}"/>
			<p:column>
				<h:graphicImage library="gfx" name="#{iconBean.map12Files[f.symbol]}"/>
			</p:column>
			<p:column>
				<f:facet name="header"><jtp:label entity="MeisLcfSubmission" code="fileName"/></f:facet>
				<h:outputText value="#{f.name}"/>
			</p:column>s
		</p:dataTable>
	</h:form>
	<h:form id="fDownload">
		<p:commandButton rendered="#{not empty handler.file}" value="Download" ajax="false" icon="ui-icon-arrowthick-1-s">
        <p:fileDownload value="#{monitoringContractReportBean.download}" />
		</p:commandButton>
	</h:form>
</ui:composition>