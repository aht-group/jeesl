<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"  xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui"
>

	<c:set var="value" value="#{value}"/>
	<c:set var="height"  value="#{height ? height : 12}" />
	<c:set var="rendered"  value="#{not empty rendered ? rendered : true}" />
	<c:set var="marginRight" value="#{marginRight}"/>
	<c:set var="marginLeft" value="#{marginLeft}"/>
	<c:set var="styleClass" value="#{styleClass}"/>

<ui:remove>	
	<p:graphicImage rendered="#{rendered and (not empty value)}"
					height="#{height}" 
					value="/image/symbolizer/graphic/#{value.class.name}/#{height}/#{value.id}">
		<c:if test="#{not empty marginRight}"><f:attribute name="style" value="margin-right: #{marginRight}px;"/></c:if>
		<c:if test="#{not empty marginLeft}"><f:attribute name="style" value="margin-left: #{marginLeft}px;"/></c:if>
		<c:if test="#{not empty marginLeftRight}"><f:attribute name="style" value="margin-left: #{marginLeftRight}px; margin-right: #{marginLeftRight}px;"/></c:if>
		<c:if test="#{not empty style}"><f:attribute name="style" value="#{style}"/></c:if>
		<c:if test="#{not empty styleClass}"><f:attribute name="styleClass" value="#{styleClass}"/></c:if>
	</p:graphicImage>
</ui:remove> 	

	<ui:fragment rendered="#{rendered and (not empty value)}">
			<img src="#{facesContext.externalContext.requestContextPath}/image/symbolizer/graphic/#{value.class.name}/#{height}/#{value.id}"
				 height="#{height}"
				 class="#{styleClass}"
				 style="#{not empty marginRight ? 'margin-right: '.concat(marginRight).concat('px;') : ''}#{not empty marginLeft ? 'margin-left: '.concat(marginLeft).concat('px;') : ''}"/>
	</ui:fragment>

</ui:composition>